"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[768],{7951:function(e,t,r){r.r(t),r.d(t,{default:function(){return oe}});var n=r(4942),s=r(4165),a=r(1413),o=r(5861),i=r(9439),c=r(2791),l=r(8870),u=r(242),d=r(4512),p=r(5825),h=r(3239),m=r(5351),x=r(4070),g=r(3400),f=r(8447),y=r(4294),v=r(5987),Z=r(8096),j=r(890),b=r(7391),S=r(3466),C=r(68),k=r(1889),w=r(184),N=function(e){var t=e.id,r=e.label,n=e.fullWidth,s=e.variant,a=e.onAddressSelected,o=e.value,l=e.setValue,u=e.error,d=e.helperText,p=e.color,m=e.focused,x=e.onBlur,f=e.sx,y=(0,c.useRef)(null),v=(0,c.useState)(!!window.google),Z=(0,i.Z)(v,2),j=Z[0],k=Z[1];return(0,c.useEffect)((function(){var e=function(){var e=new window.google.maps.places.Autocomplete(y.current,{types:["address"]});e.addListener("place_changed",(function(){var t=e.getPlace();a(t)})),k(!0)};window.initAutocomplete=e;return window.google?e():function(){if(!document.querySelector('script[src*="googleapis"]')){var e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyAOIAvgfRO_yoKGeUry1pZuplH2KezGbU8","&libraries=places&callback=initAutocomplete"),e.async=!0,e.defer=!0,document.head.appendChild(e)}}(),function(){var e=document.getElementById("google-maps-script");e&&document.head.removeChild(e),window.initAutocomplete&&delete window.initAutocomplete}}),[a]),(0,w.jsx)(b.Z,{inputRef:y,id:t,label:r,fullWidth:n,InputProps:{endAdornment:(0,w.jsx)(S.Z,{position:"end",children:j?(0,w.jsx)(C.Z,{title:"Google Places will help you validate your address",children:(0,w.jsx)(g.Z,{sx:{mr:-1},children:(0,w.jsx)("svg",{height:"20",fill:"#0f75e0",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,w.jsx)("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 7H13V9H11V7ZM11 11H13V17H11V11Z"})})})}):(0,w.jsx)(h.Z,{size:20,thickness:4,color:"primary"})})},variant:s,value:o,onChange:function(e){return l(e.target.value)},helperText:d,error:u,color:p,focused:m,onBlur:x,autoComplete:"address",sx:f})},I=r(260),T=r(456),P=r(2019),E=["email","firstName","lastName"],_=function(e){var t=e.next,r=e.back,l=e.onShippingDetailsSubmit,u=e.formData,d=(0,c.useState)(""),p=(0,i.Z)(d,2),h=p[0],m=p[1],x=(0,c.useState)(""),f=(0,i.Z)(x,2),_=f[0],z=f[1],F=(0,c.useState)(""),q=(0,i.Z)(F,2),A=q[0],W=q[1],M=(0,c.useState)(""),H=(0,i.Z)(M,2),D=H[0],B=H[1],O=(0,c.useState)(""),V=(0,i.Z)(O,2),R=V[0],U=V[1],L=(0,c.useState)(""),Q=(0,i.Z)(L,2),G=Q[0],J=Q[1],Y=(0,c.useState)(""),$=(0,i.Z)(Y,2),K=$[0],X=$[1],ee=(0,c.useState)(""),te=(0,i.Z)(ee,2),re=te[0],ne=te[1],se=(0,c.useState)(""),ae=(0,i.Z)(se,2),oe=ae[0],ie=ae[1],ce=(0,c.useState)(""),le=(0,i.Z)(ce,2),ue=le[0],de=le[1],pe=(0,c.useState)(!1),he=(0,i.Z)(pe,2),me=he[0],xe=he[1],ge=(0,P.a)().isLoggedIn,fe=localStorage.getItem("userFirstName"),ye=localStorage.getItem("userLastName"),ve=localStorage.getItem("userEmail"),Ze=localStorage.getItem("userPhone"),je=localStorage.getItem("userAddress"),be=localStorage.getItem("userAddress2"),Se=localStorage.getItem("userCity"),Ce=localStorage.getItem("userState"),ke=localStorage.getItem("userZip"),we=localStorage.getItem("userCountry"),Ne=function(){var e=localStorage.getItem("customerId"),t="true"===localStorage.getItem("isGuest");return e&&e.startsWith("guest-")||t};(0,c.useEffect)((function(){if(Ne());else{var e=localStorage.getItem("token"),t=(0,T.Z)(e).customerId;Ie(t)}}),[]);var Ie=function(e){fetch("http://localhost:8000/api/customer/".concat(e),{credentials:"include"}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(e){B(e.phone),U(e.address),J(e.address2),X(e.city),ne(e.state),ie(e.zip),de(e.country)})).catch((function(e){console.error("Error fetching customer data:",e)}))};(0,c.useEffect)((function(){me||(m(u.firstName||fe||""),z(u.lastName||ye||""),W(u.email||ve||""),B(u.phone||Ze||""),U(u.address||je||""),J(u.address2||be||""),X(u.city||Se||""),ne(u.state||Ce||""),ie(u.zip||ke||""),de(u.country||we||""))}),[u,me,je,be,Se,we,ve,fe,ye,Ze,Ce,ke]);var Te=(0,c.useState)({email:"",firstName:"",lastName:"",phone:"",address:"",city:"",state:"",zip:"",country:""}),Pe=(0,i.Z)(Te,2),Ee=Pe[0],_e=Pe[1],ze=function(e,t){var r="";switch(e){case"email":t?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(t)||(r="Invalid email address"):r="Email is required";break;case"firstName":r=t?"":"First name is required";break;case"lastName":r=t?"":"Last name is required";break;case"address":r=t?"":"Address is required";break;case"city":r=t?"":"City is required";break;case"state":r=t?"":"State is required";break;case"zip":r=t?/^\d{5}(-\d{4})?$/.test(t)?"":"Invalid zip code":"Zip code is required";break;case"country":r=t?"":"Country is required"}return _e((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,n.Z)({},e,r))})),!r},Fe=function(e){e.preventDefault();var r=ze("email",A),n=ze("firstName",h),s=ze("lastName",_),a=ze("address",R),o=ze("city",K),i=ze("state",re),c=ze("zip",oe),u=ze("country",ue);if(r&&n&&s&&a&&o&&i&&c&&u){var d={email:A,firstName:h,lastName:_,phone:D,address:R,address2:G,city:K,state:re,zip:oe,country:ue};l(d),xe(!0),Ae(d),t()}},qe=function(e){return["firstName","lastName","email","phone","address","address2","city","state","zip","country"].every((function(t){return e[t]===localStorage.getItem("user"+t.charAt(0).toUpperCase()+t.slice(1))}))},Ae=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r,n,a,o,i,c,l,u,d;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Ne()){e.next=26;break}if((n=localStorage.getItem("customerId"))&&!n.startsWith("guest-")&&qe(t)){e.next=24;break}return a=n&&!n.startsWith("guest-")?"http://localhost:8000/api/guest/".concat(n):"http://localhost:8000/api/guest",o=n&&!n.startsWith("guest-")?"PUT":"POST",e.next=8,fetch(a,{method:o,credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 8:if(!(r=e.sent).ok){e.next=19;break}return e.next=12,r.json();case 12:i=e.sent,c="POST"===o?i._id:n,localStorage.setItem("customerId",c),localStorage.setItem("isGuest","true"),Object.keys(t).forEach((function(e){localStorage.setItem("user"+e.charAt(0).toUpperCase()+e.slice(1),t[e])})),e.next=24;break;case 19:return e.next=21,r.json();case 21:return l=e.sent,console.error("Failed to submit form data:",l.message),e.abrupt("return");case 24:e.next=30;break;case 26:return t.email,t.firstName,t.lastName,u=(0,v.Z)(t,E),e.next=29,fetch("http://localhost:8000/api/customer/".concat(localStorage.getItem("customerId")),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(u)});case 29:r=e.sent;case 30:if(!r||r.ok){e.next=37;break}return e.next=33,r.json();case 33:d=e.sent,console.error("Failed to submit form data:",d.message),e.next=38;break;case 37:r&&r.ok&&console.log("Form data submitted successfully");case 38:e.next=43;break;case 40:e.prev=40,e.t0=e.catch(0),console.error("Error submitting form data:",e.t0);case 43:case"end":return e.stop()}}),e,null,[[0,40]])})));return function(t){return e.apply(this,arguments)}}(),We={"& .MuiInputBase-input":{fontSize:"14px"},"& .MuiInputLabel-root":{fontSize:"14px"},border:"0,1px solid black"};return(0,w.jsx)("form",{onSubmit:Fe,className:"information-form-container",children:(0,w.jsxs)(Z.Z,{children:[(0,w.jsx)(j.Z,{fontWeight:600,fontSize:16,pb:2,mb:1,variant:"h6",className:"information-titles",children:"Contact"}),(0,w.jsx)(b.Z,{type:"email",required:!0,id:"email",name:"email",label:"Email",value:A||"",onChange:function(e){return W(e.target.value)},helperText:Ee.email||" ",error:!!Ee.email,color:A&&!Ee.email?"success":"primary",focused:!!A,autoComplete:"email",variant:"outlined",onBlur:function(){return ze("email",A)},sx:We,disabled:!!ge&&!!A,InputProps:{endAdornment:(0,w.jsx)(S.Z,{position:"end",children:ge&&A?(0,w.jsx)(C.Z,{title:"To Change Your Email Please Go To The Account Page By Clicking the Account Icon On The Top Right Of The Page",children:(0,w.jsx)(g.Z,{sx:{mr:-1},children:(0,w.jsx)("svg",{fill:"#0f75e0",height:"20",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,w.jsx)("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 7H13V9H11V7ZM11 11H13V17H11V11Z"})})})}):null})},children:"Email"}),(0,w.jsx)(b.Z,{required:!0,type:"tel",id:"phone",name:"phone",label:"phone (optional)",value:D||"",onChange:function(e){var t=function(e){if(!e)return e;var t=e.replace(/[^\d]/g,""),r=t.length;return r<4?t:r<7?"(".concat(t.slice(0,3),") ").concat(t.slice(3)):"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6,10))}(e.target.value);B(t)},color:D&&!Ee.phone?"success":"primary",focused:!!D,autoComplete:"phone",variant:"outlined",sx:We,InputProps:{endAdornment:(0,w.jsx)(S.Z,{position:"end",children:(0,w.jsx)(C.Z,{title:"Incase we need to contact you about your order",children:(0,w.jsx)(g.Z,{sx:{mr:-1},children:(0,w.jsx)("svg",{fill:"#0f75e0",height:"20",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,w.jsx)("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 7H13V9H11V7ZM11 11H13V17H11V11Z"})})})})})},children:"Phone"}),(0,w.jsx)(j.Z,{fontWeight:600,fontSize:16,pb:2,my:1,variant:"h6",className:"information-titles",children:"Shipping Information"}),(0,w.jsxs)(k.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(k.ZP,{item:!0,xs:12,sm:6,children:(0,w.jsx)(b.Z,{fullWidth:!0,required:!0,type:"text",id:"firstName",name:"firstName",label:"First Name",value:h||"",onChange:function(e){return m(e.target.value)},error:!!Ee.firstName,helperText:Ee.firstName||" ",autoComplete:"given-name",variant:"outlined",color:h&&!Ee.firstName?"success":"primary",onBlur:function(){return ze("firstName",h)},focused:!!h,sx:We})}),(0,w.jsx)(k.ZP,{item:!0,xs:12,sm:6,children:(0,w.jsx)(b.Z,{required:!0,autoComplete:"family-name",value:_||"",onChange:function(e){z(e.target.value)},error:!!Ee.lastName,helperText:Ee.lastName||" ",color:_&&!Ee.lastName?"success":"primary",id:"lastName",name:"lastName",label:"Last Name",fullWidth:!0,variant:"outlined",onBlur:function(){return ze("lastName",_)},focused:!!_,sx:We})}),(0,w.jsx)(k.ZP,{item:!0,xs:12,children:(0,w.jsx)(N,{id:"address",label:"Address line 1*",fullWidth:!0,error:!!Ee.address,helperText:Ee.address||" ",color:R&&!Ee.address?"success":"primary",onAddressSelected:function(e){var t="",r="";U(""),J(""),X(""),ne(""),ie(""),de(""),e.address_components.forEach((function(e){var n=e.types[0];switch("street_number"===n?t=e.long_name:"route"===n&&(r=e.long_name),n){case"street_number":t=e.long_name;break;case"route":r=e.long_name;break;case"locality":X(e.long_name);break;case"administrative_area_level_1":ne(e.short_name);break;case"postal_code":ie(e.long_name);break;case"country":de(e.long_name)}}));var n=t&&r?"".concat(t," ").concat(r):r;U(n)},value:R||"",setValue:U,focused:!!R,onBlur:function(){return ze("address",R)},sx:We})}),(0,w.jsx)(k.ZP,{item:!0,xs:12,children:(0,w.jsx)(b.Z,{helperText:(0,w.jsxs)("span",{children:[(0,w.jsx)("svg",{height:"16",style:{transform:"translateY(3px)"},viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,w.jsx)("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 7H13V9H11V7ZM11 11H13V17H11V11Z"})})," Add a Building /Appartment number if you have one"]}),id:"address2",name:"address2",label:"Address line 2 (optional)",fullWidth:!0,autoComplete:"shipping address-line2",variant:"outlined",onChange:function(e){return J(e.target.value)},value:G||"",sx:We,focused:!!G,color:G?"success":"primary"})}),(0,w.jsx)(k.ZP,{item:!0,xs:12,sm:4,children:(0,w.jsx)(b.Z,{value:K||"",onChange:function(e){X(e.target.value)},onBlur:function(){return ze("city",K)},error:!!Ee.city,helperText:Ee.city||" ",color:K&&!Ee.city?"success":"primary",required:!0,id:"city",name:"city",label:"City",fullWidth:!0,autoComplete:"shipping address-level2",variant:"outlined",focused:!!K,sx:We})}),(0,w.jsx)(k.ZP,{item:!0,xs:12,sm:4,children:(0,w.jsx)(b.Z,{value:re||"",onChange:function(e){ne(e.target.value)},error:!!Ee.state,helperText:Ee.state||" ",color:re&&!Ee.state?"success":"primary",required:!0,id:"state",name:"state",label:"State",fullWidth:!0,autoComplete:"administrative_area_level_1",variant:"outlined",onBlur:function(){return ze("state",re)},focused:!!re,sx:We})}),(0,w.jsx)(k.ZP,{item:!0,xs:12,sm:4,children:(0,w.jsx)(b.Z,{value:oe||"",onChange:function(e){ie(e.target.value)},error:!!Ee.zip,helperText:Ee.zip||" ",color:oe&&!Ee.zip?"success":"primary",required:!0,id:"zip",name:"zip",label:"ZIP code",fullWidth:!0,autoComplete:"postal_code",variant:"outlined",onBlur:function(){return ze("zip",oe)},focused:!!oe,sx:We})}),(0,w.jsx)(k.ZP,{item:!0,xs:12,children:(0,w.jsx)(b.Z,{value:ue||"",onChange:function(e){de(e.target.value)},error:!!Ee.country,helperText:Ee.country||" ",color:ue&&!Ee.country?"success":"primary",required:!0,id:"country",name:"country",label:"Country/Region",fullWidth:!0,autoComplete:"country",variant:"outlined",onBlur:function(){return ze("country",ue)},focused:!!ue,sx:We})}),(0,w.jsxs)(k.ZP,{item:!0,xs:12,className:"information-buttons",children:[(0,w.jsxs)(y.Z,{onClick:r,variant:"outlined",sx:{height:55,m:1,letterSpacing:2,color:"#283047",backgroundColor:"white",borderColor:"#283047",borderWidth:1.5,"&:hover":{backgroundColor:"#0F75E0",color:"white"}},children:[(0,w.jsx)(I.Z,{sx:{fontSize:18,mr:1,display:{xs:"none",sm:"block"}}}),"Back to cart"]}),(0,w.jsxs)(y.Z,{onClick:Fe,variant:"outlined",sx:{letterSpacing:2,color:"white",backgroundColor:"#283047","&:hover":{backgroundColor:"#FE6F49",border:"1px solid #FE6F49 "},textAlign:"center",height:55},children:[(0,w.jsx)("span",{className:"cartSummary-checkout-text",children:"Proceed"}),"  to Shipping"]})]})]})]})})},z=r(493),F=r(4852),q=r(9900),A=r(653),W=r(9040),M=r(1604),H=function(e){var t=e.shippingDetails,r=e.back,n={textDecoration:"underline",fontSize:12};return(0,w.jsxs)("div",{className:"checkout-shipping",children:[(0,w.jsx)(j.Z,{variant:"h6",children:"Contact:"}),(0,w.jsxs)("div",{className:"checkout-shipping-contact",children:[(0,w.jsx)(j.Z,{variant:"subtitle1",children:" Contact:"}),(0,w.jsxs)("div",{className:"checkout-shipping-change",children:[(0,w.jsx)(j.Z,{variant:"body2",fontWeight:100,children:t.phone}),(0,w.jsx)(j.Z,{variant:"body2",fontWeight:100,children:t.email}),(0,w.jsx)(y.Z,{onClick:r,style:n,children:"Change"})]})]}),(0,w.jsxs)("div",{className:"checkout-shipping-address",children:[(0,w.jsx)(j.Z,{variant:"subtitle1",children:"Ship to:"}),(0,w.jsxs)("div",{className:"checkout-shipping-change",children:[(0,w.jsx)(j.Z,{fontWeight:100,variant:"body2",children:t.firstName+" "+t.lastName}),(0,w.jsx)(j.Z,{fontWeight:100,variant:"body2",children:"".concat(t.address," ").concat(t.address2,", ").concat(t.city,", ").concat(t.state," ").concat(t.zip,", ").concat(t.country)}),(0,w.jsx)(y.Z,{onClick:r,style:n,children:"Change"})]})]})]})},D=function(e){var t=e.cartItems,r=e.shippingDetails,n=e.onShippingCostChange,u=e.back,d=e.isLoading,p=e.onShippingOptionsChange,m=e.handleCheckout,x=e.setEstimatedShipping,g=e.lastAddress,f=e.setLastAddress,v=e.shipmentOptions,Z=e.setShipmentOptions,b=e.fullCost,S=e.setShippingDetails,C=(0,c.useState)([]),N=(0,i.Z)(C,2),T=N[0],P=N[1],E=(0,c.useState)(!1),_=(0,i.Z)(E,2),D=_[0],B=_[1],O=(0,c.useState)(1),V=(0,i.Z)(O,2),R=V[0],U=V[1],L=(0,c.useState)([]),Q=(0,i.Z)(L,2),G=Q[0],J=Q[1],Y=(0,c.useState)(!1),$=(0,i.Z)(Y,2),K=$[0],X=$[1],ee=(0,c.useState)(""),te=(0,i.Z)(ee,2),re=te[0],ne=te[1],se=0,ae=0,oe=0,ie=0,ce=5,le=5,ue=5;t.forEach((function(e){var t=e.length||ce,r=e.width||le,n=e.height||ue,s=e.weight*e.quantity;se+=s,ae=Math.max(ae,t),oe=Math.max(oe,r),ie=Math.max(ie,n)}));var de=function(e){if(null===e||void 0===e||""===e||isNaN(e))return"Estimated delivery date not available";var t=new Date,r=(0,W.Z)(t,e);return(0,M.Z)(r,"MMMM do, yyyy")},pe=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var t,n,o,i,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(JSON.stringify(g)!==JSON.stringify(r)){e.next=3;break}return P(v),e.abrupt("return");case 3:return e.prev=3,B(!0),"http://localhost:8000/api/shippo",t={addressTo:{name:"".concat(r.firstName," ").concat(r.lastName),street1:r.address,street2:r.address2,city:r.city,state:r.state,zip:r.zip,country:r.country},parcel:{length:ae.toString(),width:oe.toString(),height:ie.toString(),distance_unit:"in",weight:se.toString(),mass_unit:"oz"}},e.next=9,fetch("http://localhost:8000/api/shippo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 9:if((n=e.sent).ok){e.next=18;break}return e.next=13,n.text();case 13:throw o=e.sent,console.error("HTTP Error: ".concat(n.status," ").concat(n.statusText),o),new Error("HTTP Error: ".concat(n.status));case 18:return e.next=20,n.json();case 20:i=e.sent,c=i.rates.sort((function(e,t){return parseFloat(e.amount)-parseFloat(t.amount)})),b.subTotal>50&&(c=c.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{amount_local:parseFloat(e.amount_local)<10?0:e.amount_local,isFree:parseFloat(e.amount_local)<10})}))),P(c),f(r),Z(c);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(3),console.error("There was a problem with the fetch operation:",e.t0);case 31:return e.prev=31,B(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,28,31,34]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){r&&r.address&&pe()}),[]),(0,c.useEffect)((function(){J(new Array(T.length).fill(!1))}),[T]);var he=4*R,me=he-4,xe=T.slice(me,he);return(0,w.jsxs)(l.Z,{className:"checkout-shipping-container",children:[(0,w.jsx)(H,{shippingDetails:r,back:u}),D?(0,w.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,w.jsx)(h.Z,{}),"Getting Shipping Rates..."]}):(0,w.jsxs)(z.Z,{children:[(0,w.jsx)(j.Z,{variant:"h6",children:"Shipping Method"}),re&&(0,w.jsx)(j.Z,{color:"error",style:{margin:"10px 0"},children:re}),(0,w.jsx)(l.Z,{children:(0,w.jsx)(z.Z,{children:xe.map((function(e,t){return(0,w.jsx)(F.ZP,{style:{backgroundColor:G[t]?"rgba(15, 117, 224, 0.1)":"",borderColor:re?"#D23030":""},className:"checkout-shipping-item-".concat(+t),children:(0,w.jsxs)("div",{className:"checkout-shipping-item-container",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)(q.Z,{className:"checkout-shipping-name",primary:e.servicelevel.name,secondary:"Estimated Delivery: ".concat(de(e.estimated_days))}),(0,w.jsx)(A.Z,{children:(0,w.jsx)("img",{src:e.provider_image_75,alt:"index"})})]}),(0,w.jsxs)("div",{className:"checkout-shipping-item-price-container",children:[(0,w.jsx)(q.Z,{className:"checkout-shipping-price",primary:e.isFree?"Free":"$"+e.amount_local,style:{marginRight:"5px"}}),(0,w.jsx)(y.Z,{disabled:G[t],className:"checkout-shipping-button",sx:{fontSize:12,minWidth:"80px",ml:2},variant:"outlined",onClick:function(){return function(e,t){var s=xe.map((function(e){return de(e.estimated_days)}));T[t].isFree&&(e=0),n(e),p(T[t]),x(s[t]);var o=G.map((function(e,r){return r===t}));J(o),X(!0),T[t].parcel={length:ae.toString(),width:oe.toString(),height:ie.toString(),distance_unit:"in",weight:se.toString(),mass_unit:"oz"},S((0,a.Z)((0,a.Z)({},T[t]),r))}(e.amount_local,t)},children:G[t]?"Selected":"Select"})]})]})},t)}))})}),(0,w.jsxs)(k.ZP,{container:!0,style:{marginTop:"20px",justifyContent:"space-between"},children:[R>1&&(0,w.jsx)(y.Z,{variant:"contained",onClick:function(){U(R-1)},children:"Previous"}),he<T.length&&(0,w.jsx)(y.Z,{variant:"contained",onClick:function(){U(R+1)},children:1===R?"See More Shipping Options":"Next"})]})]}),(0,w.jsxs)(k.ZP,{container:!0,sx:{marginTop:"20px",justifyContent:"space-between",marginLeft:{xs:3.5,sm:0}},children:[(0,w.jsxs)(y.Z,{onClick:u,variant:"outlined",sx:{m:1,width:{xs:"75%",sm:"45%",md:"230px"},letterSpacing:2,color:"#283047",backgroundColor:"white",borderColor:"#283047",borderWidth:1.5,height:55,"&:hover":{backgroundColor:"#0F75E0",color:"white"}},children:[(0,w.jsx)(I.Z,{sx:{fontSize:18,mr:1}}),"Return to information"]}),(0,w.jsx)(y.Z,{disabled:!!d,onClick:function(){K?m():ne("Please select a shipping option to proceed.")},variant:"outlined",sx:{m:1,width:{xs:"75%",sm:"45%",md:"230px"},letterSpacing:2,color:"white",backgroundColor:"#283047",height:56.5,"&:hover":{backgroundColor:"#FE6F49",border:"none"},textAlign:"center"},children:d?(0,w.jsx)(h.Z,{size:24,sx:{color:"#0F75E0"}}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("span",{className:"cartSummary-checkout-text",children:"Proceed to "})," Payment"]})})]})]})},B=r(9472),O=r(5585),V=r(2419),R=r(5860),U=r(3395),L=r(1087),Q=function(e){var t=e.cartItems,r=e.shippingCost,n=e.total,s=e.removeFromCart,a=e.adjustQuantity,o=e.next,u=e.step,d=e.setFullCost,p=function(e){return"number"===typeof e?"$".concat(e.toFixed(2)):e},h=.11*n,m=isNaN(r)?0:Number(r),x=n+m+h,f=(0,c.useRef)(null),v=(0,c.useState)(!1),Z=(0,i.Z)(v,2),b=Z[0],S=Z[1];(0,c.useEffect)((function(){if(!(t.length<2)){var e=function(){var e=f.current.scrollHeight>f.current.clientHeight;S(e)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}}),[]);return(0,c.useEffect)((function(){d({subTotal:n,grandTotal:x,tax:Number(h.toFixed(2)),shippingCost:m})}),[x]),(0,w.jsx)("div",{className:"cartSummary-container",children:(0,w.jsxs)(z.Z,{disablePadding:!0,children:[(0,w.jsxs)(l.Z,{ref:f,sx:{maxHeight:"60vh",minHeight:"65vh",overflow:"auto",mt:{xs:1,sm:-2.5},mb:-1.25},children:[(0,w.jsx)(j.Z,{variant:"h1",component:"h1",sx:{borderBottom:.1,my:2,textAlign:"center",fontSize:"h5.fontSize"},gutterBottom:!0,children:"Order Summary"}),0===t.length?(0,w.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",height:"50vh"},children:[(0,w.jsx)(j.Z,{align:"center",sx:{mt:3,fontVariant:"all-small-caps",fontSize:{xs:16,sm:20,md:22},fontWeight:100},children:"Your Cart Is Empty!"}),(0,w.jsx)("svg",{height:"150",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",children:(0,w.jsx)("path",{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 0 0-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 1 0 0 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 0 0-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 0 0-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 0 0-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 0 0-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 0 1-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 0 1-31.6 31.6z"})}),(0,w.jsx)(y.Z,{to:"/shop",component:L.rU,sx:{border:1,width:"50%",borderRadius:0,letterSpacing:2,color:"#283047",backgroundColor:"white",borderColor:"#283047",borderWidth:1.5,height:55,"&:hover":{backgroundColor:"#0F75E0",color:"white"}},children:" Start Shopping"})]}):t.map((function(e,t){return(0,w.jsxs)(l.Z,{sx:{display:"flex",mx:{xs:2,sm:5},my:2},children:[(0,w.jsx)(B.Z,{badgeContent:e.quantity,color:"secondary",sx:{".MuiBadge-badge":{backgroundColor:"rgba(195, 26, 210, 0.72)",color:"white"}},children:(0,w.jsx)("img",{className:"cart-img",src:e.img,alt:e.name,width:80,height:80,loading:"lazy"})}),(0,w.jsxs)(l.Z,{children:[(0,w.jsxs)(l.Z,{sx:{ml:1},children:[(0,w.jsx)(j.Z,{sx:{fontWeight:500,fontSize:18,fontFamily:'"Avenir Next", sans-serif',fontVariantCaps:"all-small-caps",lineHeight:{xs:1},width:{xs:"auto",md:"100%"}},variant:"h6",children:e.name}),(0,w.jsx)(j.Z,{sx:{fontFamily:'"Avenir Next", sans-serif',fontWeight:200,color:"black",fontVariantCaps:"all-small-caps",lineHeight:1},children:e.specs})]}),(0,w.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:{xs:"260px",md:"290px"}},children:[(0,w.jsxs)(j.Z,{sx:{fontWeight:100,color:"gray",ml:1},children:["$",e.price.toFixed(2)*e.quantity]}),(0,w.jsx)(l.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center"},children:(0,w.jsxs)(l.Z,{sx:{border:1,width:100,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,w.jsx)(g.Z,{onClick:function(){return a(e._id,e.quantity-1)},children:(0,w.jsx)(O.Z,{sx:{fontSize:10}})}),(0,w.jsx)(j.Z,{sx:{fontWeight:100},children:e.quantity}),(0,w.jsx)(g.Z,{onClick:function(){return a(e._id,e.quantity+1)},children:(0,w.jsx)(V.Z,{sx:{fontSize:10}})})]})}),(0,w.jsx)(l.Z,{sx:{},children:(0,w.jsx)(y.Z,{sx:{fontSize:12,color:"#0F75E0",textDecoration:"underline"},onClick:function(){return s(e._id)},children:"Remove"})})]})]})]},"product:"+t)}))]}),t.length>0&&(0,w.jsxs)(w.Fragment,{children:[b&&(0,w.jsx)(g.Z,{onClick:function(){f.current&&(f.current.scrollTop=f.current.scrollHeight)},sx:{position:"absolute",right:{xs:"20vw",sm:"8vw"},bottom:0!==u?225:{xs:360,sm:290},backgroundColor:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(4px)",borderRadius:"50%",border:"1px solid black"},children:(0,w.jsx)(U.Z,{})}),(0,w.jsxs)(l.Z,{className:"cartSummary-cost",children:[(0,w.jsxs)(F.ZP,{style:{padding:"10px 0"},children:[(0,w.jsx)(q.Z,{primary:"Subtotal"}),(0,w.jsx)(j.Z,{variant:"subtitle1",style:{fontWeight:500},children:p(n)})]}),(0,w.jsxs)(F.ZP,{style:{padding:"10px 0"},children:[(0,w.jsx)(q.Z,{primary:"Shipping"}),(0,w.jsx)(j.Z,{variant:"body2",children:0===r?"Free!":p(r)})]}),(0,w.jsxs)(F.ZP,{style:{padding:"10px 0"},children:[(0,w.jsx)(q.Z,{primary:(0,w.jsxs)(l.Z,{component:"span",sx:{display:"flex",alignItems:"center"},children:["Estimated Taxes",(0,w.jsx)(C.Z,{title:"The final tax and total will be confirmed by email or text after you place your order.",arrow:!0,children:(0,w.jsx)(R.Z,{sx:{fontSize:18,ml:1,cursor:"pointer"}})})]})}),(0,w.jsx)(j.Z,{variant:"body2",children:p(h)})]}),(0,w.jsxs)(F.ZP,{style:{padding:"10px 0"},children:[(0,w.jsx)(q.Z,{primary:"Total"}),(0,w.jsx)(j.Z,{variant:"subtitle1",style:{fontWeight:700},children:p(x)})]})]}),0===u?(0,w.jsxs)(l.Z,{className:"cartSummary-checkout-button",children:[(0,w.jsxs)(y.Z,{onClick:o,variant:"outlined",sx:{m:1,width:{xs:"75%",sm:"45%",md:"40%"},letterSpacing:2,color:"white",backgroundColor:"#283047",height:56.5,"&:hover":{backgroundColor:"#FE6F49",border:"none"},textAlign:"center"},children:[(0,w.jsx)("span",{className:"cartSummary-checkout-text",children:"Proceed  to "})," Checkout"]}),(0,w.jsx)(y.Z,{component:L.rU,to:"/shop",variant:"outlined",sx:{m:1,width:{xs:"75%",sm:"45%",md:"40%"},letterSpacing:2,color:"#283047",backgroundColor:"white",borderColor:"#283047",borderWidth:1.5,height:55,"&:hover":{backgroundColor:"#0F75E0",color:"white"}},children:"Continue Shopping"})]}):null]})]})})},G=r(6679),J=r(7689),Y=r(6305),$=r(2814),K=function(e){var t=e.onPaymentProcess,r=e.shippingDetails,n=e.back,s=e.errors,a=e.total;return(0,w.jsxs)("div",{className:"checkout-paymentForm-container",children:[(0,w.jsx)(H,{shippingDetails:r,back:n}),(0,w.jsx)(j.Z,{mt:8,variant:"h6",children:"Payment:  "}),(0,w.jsxs)(j.Z,{variant:"body2",fontWeight:100,className:"checkout-paymentForm-SQUARE",children:[(0,w.jsx)("span",{className:"square-text",children:" All transactions are processed secured and encrypted by"}),"    ",(0,w.jsx)("img",{src:"https://images.ctfassets.net/2d5q1td6cyxq/58rgox9CjnDZYQSxSwikxb/d9cae0bf4d3f53900820eac00b049528/PD04488_-_black_logo_on_white.png?w=1502&h=768&fm=avif&q=85&fit=scale",alt:"square-logo",className:"checkout-paymentForm-logo"})]}),(0,w.jsx)(j.Z,{variant:"body2",fontWeight:100,className:"square-form-text",children:"Square\xa9 Payment Form"}),(0,w.jsxs)("div",{className:"checkout-payment-card-form",children:[(0,w.jsx)(j.Z,{color:"error",variant:"body2",fontWeight:100,className:"checkout-paymentForm-SQUARE",children:s}),(0,w.jsxs)(Y.Z,{applicationId:"sq0idp-hf28U7qMTnVAg3UfzB4QYQ",locationId:"LMGVYG8QR4QFQ",cardTokenizeResponseReceived:function(e){t(e)},children:[(0,w.jsxs)(j.Z,{color:"primary",children:["Will be Charged: $",a.grandTotal.toFixed(2)]}),(0,w.jsx)($.Z,{})]})]}),(0,w.jsxs)(y.Z,{onClick:n,variant:"outlined",sx:{mt:3,width:"100%",letterSpacing:2,color:"#283047",backgroundColor:"white",borderColor:"#283047",borderWidth:1.5,height:50,"&:hover":{backgroundColor:"#0F75E0",color:"white"}},children:[(0,w.jsx)(I.Z,{sx:{fontSize:18,mr:1}}),"Return to shipping"]})]})},X=r(2003),ee={display:"flex",alignItems:"center",justifyContent:"center"},te={display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.8)",padding:"20px",borderRadius:"10px"},re={marginTop:"10px",fontSize:"16px"};function ne(e){return(0,w.jsxs)(l.Z,{sx:{position:"relative",display:"inline-flex"},children:[(0,w.jsx)(h.Z,(0,a.Z)({variant:"determinate"},e)),(0,w.jsx)(l.Z,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,w.jsx)(j.Z,{variant:"caption",component:"div",color:"text.secondary",children:"".concat(Math.round(e.value),"%")})})]})}var se=function(e){var t=e.open,r=e.message,n=(0,c.useState)(0),s=(0,i.Z)(n,2),a=s[0],o=s[1];return(0,c.useEffect)((function(){var e=setInterval((function(){o((function(e){return e>=100?0:e+1.5}))}),100);return function(){clearInterval(e),t||o(0)}}),[t]),(0,w.jsx)(f.Z,{open:t,closeAfterTransition:!0,style:ee,children:(0,w.jsx)(X.Z,{in:t,timeout:500,children:(0,w.jsxs)("div",{style:te,children:[(0,w.jsx)(ne,{value:a}),(0,w.jsx)("span",{style:re,children:r})]})})})},ae=r(4367),oe=function(){(0,c.useEffect)((function(){document.title="Checkout - Complete Your Herba Naturals Purchase",document.querySelector('meta[name="description"]').setAttribute("content","Secure checkout process for your Herba Naturals purchases. Complete your order of premium CBD products quickly and safely.")}),[]);var e=(0,c.useState)(!1),t=(0,i.Z)(e,2),r=t[0],v=t[1],Z=(0,J.s0)(),j=(0,J.UO)().step,b=parseInt(j)-1,S=(0,c.useState)({}),C=(0,i.Z)(S,2),k=C[0],N=C[1],I=["Cart","Information","Shipping","Payment"],T=(0,G.j)(),E=T.cart,z=T.removeFromCart,F=T.adjustQuantity,q=T.notes,A=T.clearCart,W=(0,c.useState)("Calculated at Next Step"),M=(0,i.Z)(W,2),B=M[0],O=M[1],V=E.reduce((function(e,t){return e+t.product.price*t.quantity}),0),R="Calculated at checkout",U=(0,c.useState)({}),Y=(0,i.Z)(U,2),$=Y[0],X=Y[1],ee=(0,c.useState)({}),te=(0,i.Z)(ee,2),re=te[0],ne=te[1],oe=(0,c.useState)([]),ie=(0,i.Z)(oe,2),ce=ie[0],le=ie[1],ue=(0,c.useState)(!1),de=(0,i.Z)(ue,2),pe=de[0],he=de[1],me=(0,c.useState)({}),xe=(0,i.Z)(me,2),ge=xe[0],fe=xe[1],ye=(0,c.useState)(""),ve=(0,i.Z)(ye,2),Ze=ve[0],je=ve[1],be=(0,c.useState)({}),Se=(0,i.Z)(be,2),Ce=Se[0],ke=Se[1],we=(0,P.a)().isLoggedIn,Ne=(0,c.useState)(!1),Ie=(0,i.Z)(Ne,2),Te=Ie[0],Pe=Ie[1],Ee=(0,c.useState)(""),_e=(0,i.Z)(Ee,2),ze=_e[0],Fe=_e[1],qe=(0,c.useState)(!1),Ae=(0,i.Z)(qe,2),We=Ae[0],Me=Ae[1],He=function(e,t){"clickaway"!==t&&Pe(!1)},De=function(){Me(!1)},Be=(0,c.useState)({email:"",firstName:"",lastName:"",address:"",address2:"",city:"",state:"",zip:"",country:""}),Oe=(0,i.Z)(Be,2),Ve=Oe[0],Re=Oe[1],Ue=function(){var e=localStorage.getItem("customerId"),t="true"===localStorage.getItem("isGuest");return e&&e.startsWith("guest-")||t};(0,c.useEffect)((function(){3!==b||r?3!==b&&function(){var e=document.querySelector('script[src="https://web.squarecdn.com/v1/square.js"]');e&&document.body.removeChild(e),v(!1)}():function(){v(!1);var e=document.createElement("script");e.src="https://web.squarecdn.com/v1/square.js",e.type="text/javascript",e.async=!1,e.onload=function(){return v(!0)},e.onerror=function(){console.error("Failed to load Square SDK")},document.body.appendChild(e)}(),0===b&&Ue()&&Pe(!0)}),[b,r]);var Le=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r,n,o,i,c,l,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(he(!0),e.prev=1,r=Math.round(100*$.grandTotal),!t){e.next=37;break}return e.next=6,Ye(k);case 6:return n=e.sent,ge.shippingMethod=(0,a.Z)((0,a.Z)({},ge.shippingMethod),{},{carrier:n.rate.provider,trackingNumber:n.tracking_number,trackingUrl:n.tracking_url_provider,labelUrl:n.label_url,estimatedShipping:Ze}),e.next=10,Ge(t,r,ge);case 10:if(!0!==(o=e.sent).success){e.next=34;break}return ge.transactionId=o.response.result.payment.id,ge.paymentStatus="Paid",Ue()?(ge.createdBy=localStorage.getItem("customerId"),ge.createdByType="Guest"):(ge.createdBy=localStorage.getItem("customerId"),ge.createdByType="Customer"),e.next=17,Je(ge);case 17:if(i=e.sent,Ue()){e.next=24;break}return c={orders:i._id},e.next=22,$e(localStorage.getItem("customerId"),c);case 22:e.next=30;break;case 24:return l={orders:i._id},e.next=27,Ke(localStorage.getItem("customerId"),l);case 27:u=localStorage.getItem("isVerified"),localStorage.clear(),localStorage.setItem("isVerified",u);case 30:A(),Z("/success",{state:{paymentResult:o}}),e.next=35;break;case 34:console.error("Payment processing failed:",o);case 35:e.next=38;break;case 37:console.error("Missing payment token");case 38:e.next=43;break;case 40:e.prev=40,e.t0=e.catch(1),console.error("Error during finalizing order and payment:",e.t0);case 43:return e.prev=43,he(!1),e.finish(43);case 46:case"end":return e.stop()}}),e,null,[[1,40,43,46]])})));return function(t){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){var e=localStorage.getItem("customerId"),t=Ue();we||t?e||t||Z("/login?returnUrl=/checkout/1"):Z("/registration?returnUrl=/checkout/1")}),[we,Z]);var Qe=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:he(!0),t=localStorage.getItem("customerId"),r=localStorage.getItem("userEmail"),fe({customer:t,customerEmail:Ve.email||r,customerPhone:k.phone,products:E.map((function(e){return{name:e.product.name,productId:e.product._id,price:e.product.price,quantity:e.quantity,img:e.product.imgSource[0].url}})),shippingMethod:{provider:re.provider,carrierAccountId:re.carrier_account,serviceLevelToken:re.servicelevel.token,price:re.amount,amountCharged:re.amount_local,type:re.servicelevel.name},totalAmount:$,orderNotes:q,address:"".concat(k.firstName," ").concat(k.lastName,", ").concat(k.address,", ").concat(k.address2?k.address2:"",", ").concat(k.city,", ").concat(k.state,", ").concat(k.zip,", ").concat(k.country),createdBy:localStorage.getItem("customerId")}),he(!1),Xe();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ge=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t,r,n){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:8000/api/payment/process-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sourceId:t.token,amount:r,cost:$,notes:q,estimatedShipping:Ze,orderDetails:n,last4:t.details.card.last4})});case 3:if((a=e.sent).ok){e.next=12;break}return e.t0=Error,e.t1="Payment processing failed: HTTP ".concat(a.status," - "),e.next=9,a.text();case 9:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 12:return e.next=14,a.json();case 14:return e.abrupt("return",e.sent);case 17:return e.prev=17,e.t4=e.catch(0),console.error("Error processing payment:",e.t4),Fe("There was a problem processing your payment"),e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Je=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:8000/api/order/create",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});case 3:return r=e.sent,e.next=6,r.json();case 6:if((n=e.sent)&&200===r.status){e.next=10;break}return console.error("Error creating order:",n.message),e.abrupt("return",null);case 10:return e.abrupt("return",n);case 13:return e.prev=13,e.t0=e.catch(0),console.error("Error creating order asynchronously:",e.t0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),Ye=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r,n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"http://localhost:8000/api/shippo/create",e.next=4,fetch("http://localhost:8000/api/shippo/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shippingDetails:t})});case 4:if((r=e.sent).ok){e.next=13;break}return e.next=8,r.text();case 8:throw n=e.sent,console.error("HTTP Error: ".concat(r.status," ").concat(r.statusText),n),new Error("HTTP Error: ".concat(r.status));case 13:return e.next=15,r.json();case 15:return a=e.sent,e.abrupt("return",a);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error("Error creating shipping label:",e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:8000/api/customer/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error updating customer data:",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}(),Ke=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:8000/api/guest/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error updating customer data:",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){(isNaN(b)||b<0||b>=I.length)&&Z("/checkout/1")}),[b,I.length,Z]);var Xe=function(){Z("/checkout/".concat(b+2))},et=function(){Z("/checkout/".concat(b))},tt={marginTop:"10px",width:"80%"};return(0,w.jsxs)("div",{className:"checkoutPage-container",children:[(0,w.jsx)(se,{open:pe,message:"Your payment is being processed, Please do not leave or refresh this page"}),(0,w.jsxs)(l.Z,{sx:{display:"flex",flexDirection:{xs:"column-reverse",md:"row"}},children:[(0,w.jsx)("div",{style:{flex:1},children:(0,w.jsx)("div",{children:(0,w.jsxs)("div",{children:[(0,w.jsx)(l.Z,{sx:{position:"fixed",top:-40,left:35,textAlign:"center",zIndex:{xs:10001,sm:"auto"},pt:{xs:3.5,sm:0},pb:{xs:1,sm:0},display:{xs:"block",sm:"none"},minWidth:"350px",cursor:"pointer"},className:"brand-icon-checkout",onClick:function(){Me(!0)},children:(0,w.jsx)("img",{src:ae,alt:"brand-con",width:"80%",height:"auto"})}),(0,w.jsx)(u.Z,{activeStep:b,alternativeLabel:!0,sx:{position:{xs:"fixed",sm:"relative"},top:{xs:0,sm:"auto"},zIndex:{xs:1e4,sm:"auto"},pt:{xs:6,sm:0},pb:{xs:1,sm:0},width:{xs:"100%"},bgcolor:{xs:"background.paper"},borderBottom:{xs:"0.1px solid black",sm:"none"}},children:I.map((function(e){return(0,w.jsx)(d.Z,{children:(0,w.jsx)(p.Z,{children:e})},e)}))}),(0,w.jsxs)(l.Z,{sx:{mt:{xs:5,sm:0}},children:[0===b&&(0,w.jsx)(l.Z,{sx:{pt:{xs:0,sm:2.5},borderTop:"0.1px solid black",mt:{xs:0,sm:1}},children:(0,w.jsx)(Q,{cartItems:E.map((function(e){return{_id:e.product._id,img:e.product.imgSource[0].url,name:e.product.name,quantity:e.quantity,price:e.product.price,specs:e.product.specs}})),shippingCost:B,tax:R,total:V,removeFromCart:z,adjustQuantity:F,next:Xe,step:b,setFullCost:X})}),1===b&&(0,w.jsx)(_,{back:et,next:Xe,onShippingDetailsSubmit:function(e){Re(e),N(e)},formData:Ve,onFormChange:function(e,t){Re((function(r){return(0,a.Z)((0,a.Z)({},r),{},(0,n.Z)({},e,t))}))}}),2===b&&(0,w.jsx)(D,{handleBack:!0,cartItems:E.map((function(e){return{_id:e.product._id,weight:e.product.shipping.weight,length:e.product.shipping.dimensions.length,width:e.product.shipping.dimensions.width,height:e.product.shipping.dimensions.height,quantity:e.quantity}})),shippingDetails:k,onShippingCostChange:function(e){O(e)},formData:Ve,back:et,next:Xe,onShippingOptionsChange:function(e,t){ne(e,t)},handleCheckout:Qe,isLoading:pe,setEstimatedShipping:je,lastAddress:Ce,setLastAddress:ke,shipmentOptions:ce,setShipmentOptions:le,fullCost:$,setShippingDetails:N}),3===b&&(r?(0,w.jsx)(K,{onPaymentProcess:function(e){Le(e)},paymentForm:window.SqPaymentForm,shippingDetails:k,back:et,errors:ze,total:$}):(0,w.jsxs)("div",{style:{margin:"20px"},children:[(0,w.jsx)(H,{shippingDetails:k,back:et}),(0,w.jsx)(h.Z,{})]}))]})]})})}),0!==b&&0!==E.length?(0,w.jsx)("div",{style:{flex:.9},children:(0,w.jsx)(Q,{cartItems:E.map((function(e){return{_id:e.product._id,img:e.product.imgSource[0].url,name:e.product.name,quantity:e.quantity,price:e.product.price,specs:e.product.specs}})),shippingCost:B,tax:R,total:V,removeFromCart:z,adjustQuantity:F,setFullCost:X,handleCheckout:Qe})}):null]}),";",(0,w.jsx)(m.Z,{open:Te,autoHideDuration:null,onClose:He,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,w.jsxs)(x.Z,{action:(0,w.jsx)(g.Z,{"aria-label":"close",color:"inherit",onClick:He,children:(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"black",height:"40",width:"40",children:(0,w.jsx)("path",{d:"m10.458 31.458-1.916-1.916 9.5-9.542-9.5-9.542 1.916-1.916 9.542 9.5 9.542-9.5 1.916 1.916-9.5 9.542 9.5 9.542-1.916 1.916-9.542-9.5Z"})})}),children:["Checking out as guest.",(0,w.jsx)("br",{}),"   ",(0,w.jsx)(L.rU,{to:"/registration",color:"inherit",underline:"hover",children:"Create account?"})]})}),(0,w.jsx)(f.Z,{open:We,onClose:De,children:(0,w.jsxs)(l.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:300,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,w.jsx)("p",{style:{marginBottom:"20px",textAlign:"center"},children:"Are you sure you want to leave the checkout process? Your progress may* be lost."}),(0,w.jsx)(y.Z,{color:"error",style:tt,onClick:function(){Z("/")},children:"Yes, leave"}),(0,w.jsx)(y.Z,{style:tt,onClick:De,children:"No, stay"})]})})]})}}}]);
//# sourceMappingURL=768.fb6f0d9c.chunk.js.map