"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[204],{4235:function(e,t,r){var n=r(4165),a=r(1413),o=r(5861),s=r(9439),i=r(890),l=r(3400),c=r(7391),u=r(4294),d=r(3239),m=r(2791),h=r(184);t.Z=function(e){var t=e.close,r=e.type,p=e.resetEmail,x=e.startCountdown,f=e.countdown,Z=e.isButtonDisabled,v=(0,m.useState)(p||""),g=(0,s.Z)(v,2),j=g[0],b=g[1],y=(0,m.useState)(""),C=(0,s.Z)(y,2),w=C[0],k=C[1],S=(0,m.useState)(!1),E=(0,s.Z)(S,2),P=E[0],T=E[1],A=(0,m.useState)({}),N=(0,s.Z)(A,2),W=N[0],D=N[1],z=function(){var e=(0,o.Z)((0,n.Z)().mark((function e(t){var r,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D({}),""!==j.trim()){e.next=6;break}return D((function(e){return(0,a.Z)((0,a.Z)({},e),{},{email:"Email is required"})})),e.abrupt("return");case 6:if(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(j.trim())){e.next=10;break}return D((function(e){return(0,a.Z)((0,a.Z)({},e),{},{email:"Please enter a valid email address"})})),e.abrupt("return");case 10:return t.preventDefault(),e.prev=11,T(!0),e.next=15,fetch("http://localhost:8000/api/forgot-password",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:j})});case 15:return r=e.sent,e.next=18,r.json();case 18:o=e.sent,r.ok&&(T(!1),k(o.message),x()),429===r.status?D({email:r.statusText}):o.errors&&o.errors.email?D({email:o.errors.email}):k(o.message||"Error occurred"),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(11),T(!1),D({message:e.t0.message});case 27:return e.prev=27,T(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[11,23,27,30]])})));return function(t){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"300px",height:"400px",backgroundColor:"white",bgcolor:"background.paper",borderRadius:"5px",border:"0.1px solid black"},children:[(0,h.jsx)(i.Z,{sx:{backgroundColor:"#0F75E0",padding:2,color:"white",pb:2},variant:"h5",align:"center",children:"change"===r?"Reset Password":" Forgot Password"}),(0,h.jsx)(l.Z,{style:{transform:"translate(240px, -60px)",color:"#282F48"},onClick:function(){return t(!1)},children:(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"white",height:"40",width:"40",children:(0,h.jsx)("path",{d:"m10.458 31.458-1.916-1.916 9.5-9.542-9.5-9.542 1.916-1.916 9.542 9.5 9.542-9.5 1.916 1.916-9.5 9.542 9.5 9.542-1.916 1.916-9.542-9.5Z"})})}),(0,h.jsx)("div",{}),(0,h.jsxs)(i.Z,{mb:4,mt:{sm:-3,md:0},textAlign:"center",variant:"body2",children:["Send a link to reset  ",(0,h.jsx)("br",{}),"  your password"]}),(0,h.jsxs)("div",{style:{padding:10},children:[(0,h.jsx)(c.Z,{id:"email-reset",type:"email",autoComplete:"email",label:"Email Address",disabled:"change"===r,value:"change"===r?p:j,onChange:function(e){return b(e.target.value)},required:!0,fullWidth:!0,error:!!W.email,helperText:W.email||"",name:"email"}),(0,h.jsx)(u.Z,{variant:"outlined",color:"secondary",fullWidth:!0,onClick:z,disabled:Z||P,type:"submit",sx:{mt:8,height:"50px"},children:P?(0,h.jsx)(d.Z,{size:24}):Z?"Resend Link (".concat(f,")"):"Send Link"}),w&&(0,h.jsx)("p",{style:{textAlign:"center",color:"#30842E",marginTop:"5px"},children:w})]})]})}},4204:function(e,t,r){r.r(t);var n=r(4165),a=r(5861),o=r(4942),s=r(1413),i=r(9439),l=r(2791),c=r(7689),u=r(456),d=r(5527),m=r(890),h=r(3239),p=r(1889),x=r(7391),f=r(4294),Z=r(8447),v=r(8870),g=r(5289),j=r(5661),b=r(9157),y=r(1691),C=r(7123),w=r(2019),k=r(4235),S=r(184);t.default=function(){(0,l.useEffect)((function(){document.title="Your Account Details - Herba Naturals User Profile",document.querySelector('meta[name="description"]').setAttribute("content","Manage your Herba Naturals account details. Update personal information, track orders, and customize your CBD shopping experience.")}),[]);var e=(0,w.a)().deleteUser,t=(0,l.useState)(null),r=(0,i.Z)(t,2),E=r[0],P=r[1],T=(0,l.useState)(!1),A=(0,i.Z)(T,2),N=A[0],W=A[1],D=(0,l.useState)(!1),z=(0,i.Z)(D,2),B=z[0],F=z[1],H=(0,l.useState)({}),L=(0,i.Z)(H,2),U=L[0],V=L[1],I=(0,l.useState)(!1),M=(0,i.Z)(I,2),O=M[0],q=M[1],R=(0,c.s0)(),Y=(0,l.useState)(!1),_=(0,i.Z)(Y,2),J=_[0],$=_[1],G=(0,l.useState)(!1),K=(0,i.Z)(G,2),Q=K[0],X=K[1],ee=(0,l.useState)(30),te=(0,i.Z)(ee,2),re=te[0],ne=te[1],ae=(0,l.useState)(!1),oe=(0,i.Z)(ae,2),se=oe[0],ie=oe[1];(0,l.useEffect)((function(){var e=localStorage.getItem("token");if(e){var t=(0,u.Z)(e).customerId;le(t)}else R("/login")}),[R]);var le=function(e){F(!0),fetch("http://localhost:8000/api/customer/".concat(e),{credentials:"include"}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(e){P(e),F(!1)})).catch((function(e){console.error("Error fetching customer data:",e)}))},ce=function(e){P((0,s.Z)((0,s.Z)({},E),{},(0,o.Z)({},e.target.name,e.target.value))),q(!0)},ue=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,o,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),V({}),W(!0),e.prev=3,e.next=6,fetch("http://localhost:8000/api/customer/".concat(E._id),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(E)});case 6:if((r=e.sent).ok){e.next=15;break}return e.next=10,r.json();case 10:a=e.sent,console.error("Error updating customer data:",a),"Validation error"===a.message&&a.error&&(o={},Object.keys(a.error.errors).forEach((function(e){console.error("Validation error for ".concat(e,": ").concat(a.error.errors[e].message)),o[e]=a.error.errors[e].message})),V(o),W(!1)),e.next=22;break;case 15:return e.next=17,r.json();case 17:s=e.sent,P(s),W(!1),q(!1),window.alert("Account Succssfully Updated!");case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(3),console.error("Unknown error occurred:",e.t0);case 27:return e.prev=27,W(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[3,24,27,30]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){$(!1)};return B?(0,S.jsx)(d.Z,{sx:{p:2,maxWidth:800,margin:"0 auto",marginTop:4},children:(0,S.jsxs)(m.Z,{variant:"h5",sx:{marginBottom:2},children:["Loading Account Details...",(0,S.jsx)(h.Z,{})]})}):(0,S.jsxs)(d.Z,{sx:{p:4,maxWidth:800,margin:"0px auto",marginTop:5,marginBottom:5},children:[(0,S.jsx)(m.Z,{variant:"h1",component:"h1",sx:{marginBottom:2,fontSize:"h5.fontSize"},children:"Account Details"}),(0,S.jsxs)("form",{onSubmit:ue,children:[(0,S.jsxs)(p.ZP,{container:!0,spacing:2,children:[(0,S.jsx)(p.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(x.Z,{autoComplete:"given-name",name:"firstName",label:"First Name",fullWidth:!0,value:(null===E||void 0===E?void 0:E.firstName)||"",onChange:ce,error:!!U.firstName,helperText:U.firstName})}),(0,S.jsx)(p.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(x.Z,{label:"Last Name",fullWidth:!0,autoComplete:"family-name",name:"lastName",value:(null===E||void 0===E?void 0:E.lastName)||"",onChange:ce,error:!!U.lastName,helperText:U.lastName})}),(0,S.jsx)(p.ZP,{item:!0,xs:12,children:(0,S.jsx)(x.Z,{label:"Email",fullWidth:!0,autoComplete:"email",type:"email",id:"email",name:"email",value:(null===E||void 0===E?void 0:E.email)||"",onChange:ce,error:!!U.email,helperText:U.email?U.email:(0,S.jsxs)("span",{children:[(0,S.jsx)("svg",{height:"16",fill:"#0F75E0",style:{transform:"translateY(3px)"},viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 7H13V9H11V7ZM11 11H13V17H11V11Z"})})," This will change the email associated with your account"]})})}),(0,S.jsx)(p.ZP,{item:!0,xs:12,children:(0,S.jsx)(x.Z,{label:"Address",fullWidth:!0,name:"address1",autoComplete:"address-line1",value:(null===E||void 0===E?void 0:E.address)||"",onChange:ce})}),(0,S.jsx)(p.ZP,{item:!0,xs:12,children:(0,S.jsx)(x.Z,{label:"Address Line 2",fullWidth:!0,autoComplete:"address-line2",name:"address2",value:(null===E||void 0===E?void 0:E.address2)||"",onChange:ce})}),(0,S.jsx)(p.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(x.Z,{label:"City",fullWidth:!0,name:"city",autoComplete:"address-level2",value:(null===E||void 0===E?void 0:E.city)||"",onChange:ce})}),(0,S.jsx)(p.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(x.Z,{label:"State",fullWidth:!0,name:"state",autoComplete:"address-level1",value:(null===E||void 0===E?void 0:E.state)||"",onChange:ce})}),(0,S.jsx)(p.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(x.Z,{label:"Zip",fullWidth:!0,name:"zip",autoComplete:"postal-code",value:(null===E||void 0===E?void 0:E.zip)||"",onChange:ce})}),(0,S.jsx)(p.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(x.Z,{label:"Phone",fullWidth:!0,name:"phone",type:"tel",autoComplete:"tel",value:(null===E||void 0===E?void 0:E.phone)||"",onChange:ce})}),(0,S.jsx)(p.ZP,{item:!0,xs:12,children:(0,S.jsx)(x.Z,{autoComplete:"country-name",label:"Country",fullWidth:!0,name:"country",value:(null===E||void 0===E?void 0:E.country)||"",onChange:ce})}),(0,S.jsxs)(p.ZP,{item:!0,xs:12,children:[(0,S.jsx)(m.Z,{variant:"body2",align:"center",mt:2,children:(0,S.jsx)(f.Z,{type:"button",onClick:function(){return X(!0)},color:"primary",children:"Change your password?"})}),(0,S.jsx)(Z.Z,{open:Q,onClose:function(){return X(!1)},"aria-labelledby":"forgot-password-modal","aria-describedby":"forgot-password-form",children:(0,S.jsx)("div",{children:(0,S.jsx)(k.Z,{close:X,type:"change",resetEmail:null===E||void 0===E?void 0:E.email,startCountdown:function(){ie(!0),ne(30);var e=setInterval((function(){ne((function(t){return t<=1?(clearInterval(e),ie(!1),0):t-1}))}),1e3)},isButtonDisabled:se,countdown:re})})})]})]}),(0,S.jsxs)(v.Z,{sx:{marginTop:2,height:"90px",display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:{xs:"column",sm:"row"}},children:[(0,S.jsx)(f.Z,{style:{width:"210px"},disabled:N||!O,variant:"contained",color:"primary",type:"submit",children:N?(0,S.jsx)(h.Z,{size:24}):"Save Changes"}),(0,S.jsx)(f.Z,{style:{width:"210px"},variant:"contained",color:"error",onClick:function(){$(!0)},children:"Delete Account"})]})]}),(0,S.jsxs)(g.Z,{open:J,onClose:de,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,S.jsx)(j.Z,{id:"alert-dialog-title",children:"Delete Your Account?"}),(0,S.jsx)(b.Z,{children:(0,S.jsx)(y.Z,{id:"alert-dialog-description",children:"Are you sure you want to delete your account? This action cannot be undone."})}),(0,S.jsxs)(C.Z,{children:[(0,S.jsx)(f.Z,{onClick:de,color:"primary",children:"Cancel"}),(0,S.jsx)(f.Z,{onClick:function(){fetch("http://localhost:8000/api/customer/".concat(E._id),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"}).then(function(){var t=(0,a.Z)((0,n.Z)().mark((function t(r){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.ok){t.next=2;break}throw new Error("Error deleting account");case 2:return t.next=4,e();case 4:R("/");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.error("Error:",e)}))},color:"primary",autoFocus:!0,children:"Confirm"})]})]})]})}}}]);
//# sourceMappingURL=204.4b7fa1d2.chunk.js.map