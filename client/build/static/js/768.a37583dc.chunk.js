"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[768],{7951:function(e,t,r){r.r(t),r.d(t,{default:function(){return se}});var n=r(4942),a=r(4165),s=r(1413),o=r(5861),i=r(9439),c=r(2791),l=r(8870),u=r(242),d=r(4512),p=r(5825),h=r(3239),m=r(5351),x=r(4070),g=r(3400),f=r(5987),y=r(8096),v=r(890),Z=r(7391),j=r(3466),b=r(68),C=r(1889),S=r(4294),k=r(184),w=function(e){var t=e.id,r=e.label,n=e.fullWidth,a=e.variant,s=e.onAddressSelected,o=e.value,l=e.setValue,u=e.error,d=e.helperText,p=e.color,m=e.focused,x=e.onBlur,f=e.sx,y=(0,c.useRef)(null),v=(0,c.useState)(!!window.google),C=(0,i.Z)(v,2),S=C[0],w=C[1];return(0,c.useEffect)((function(){var e=function(){var e=new window.google.maps.places.Autocomplete(y.current,{types:["address"]});e.addListener("place_changed",(function(){var t=e.getPlace();s(t)})),w(!0)};window.initAutocomplete=e;return window.google?e():function(){if(!document.querySelector('script[src*="googleapis"]')){var e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyAOIAvgfRO_yoKGeUry1pZuplH2KezGbU8","&libraries=places&callback=initAutocomplete"),e.async=!0,e.defer=!0,document.head.appendChild(e)}}(),function(){var e=document.getElementById("google-maps-script");e&&document.head.removeChild(e),window.initAutocomplete&&delete window.initAutocomplete}}),[s]),(0,k.jsx)(Z.Z,{inputRef:y,id:t,label:r,fullWidth:n,InputProps:{endAdornment:(0,k.jsx)(j.Z,{position:"end",children:S?(0,k.jsx)(b.Z,{title:"Google Places will help you validate your address",children:(0,k.jsx)(g.Z,{sx:{mr:-1},children:(0,k.jsx)("svg",{height:"20",fill:"#0f75e0",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 7H13V9H11V7ZM11 11H13V17H11V11Z"})})})}):(0,k.jsx)(h.Z,{size:20,thickness:4,color:"primary"})})},variant:a,value:o,onChange:function(e){return l(e.target.value)},helperText:d,error:u,color:p,focused:m,onBlur:x,autoComplete:"address",sx:f})},N=r(260),I=r(456),T=r(2019),P=["email","firstName","lastName"],_=function(e){var t=e.next,r=e.back,l=e.onShippingDetailsSubmit,u=e.formData,d=(0,c.useState)(""),p=(0,i.Z)(d,2),h=p[0],m=p[1],x=(0,c.useState)(""),_=(0,i.Z)(x,2),E=_[0],z=_[1],F=(0,c.useState)(""),q=(0,i.Z)(F,2),A=q[0],M=q[1],W=(0,c.useState)(""),H=(0,i.Z)(W,2),D=H[0],B=H[1],O=(0,c.useState)(""),V=(0,i.Z)(O,2),L=V[0],U=V[1],R=(0,c.useState)(""),G=(0,i.Z)(R,2),Q=G[0],J=G[1],Y=(0,c.useState)(""),$=(0,i.Z)(Y,2),K=$[0],X=$[1],ee=(0,c.useState)(""),te=(0,i.Z)(ee,2),re=te[0],ne=te[1],ae=(0,c.useState)(""),se=(0,i.Z)(ae,2),oe=se[0],ie=se[1],ce=(0,c.useState)(""),le=(0,i.Z)(ce,2),ue=le[0],de=le[1],pe=(0,c.useState)(!1),he=(0,i.Z)(pe,2),me=he[0],xe=he[1],ge=(0,T.a)().isLoggedIn,fe=localStorage.getItem("userFirstName"),ye=localStorage.getItem("userLastName"),ve=localStorage.getItem("userEmail"),Ze=localStorage.getItem("userPhone"),je=localStorage.getItem("userAddress"),be=localStorage.getItem("userAddress2"),Ce=localStorage.getItem("userCity"),Se=localStorage.getItem("userState"),ke=localStorage.getItem("userZip"),we=localStorage.getItem("userCountry"),Ne=function(){var e=localStorage.getItem("customerId"),t="true"===localStorage.getItem("isGuest");return e&&e.startsWith("guest-")||t};(0,c.useEffect)((function(){if(Ne());else{var e=localStorage.getItem("token"),t=(0,I.Z)(e).customerId;Ie(t)}}),[]);var Ie=function(e){fetch("http://localhost:8000/api/customer/".concat(e),{credentials:"include"}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(e){B(e.phone),U(e.address),J(e.address2),X(e.city),ne(e.state),ie(e.zip),de(e.country)})).catch((function(e){console.error("Error fetching customer data:",e)}))};(0,c.useEffect)((function(){me||(m(u.firstName||fe||""),z(u.lastName||ye||""),M(u.email||ve||""),B(u.phone||Ze||""),U(u.address||je||""),J(u.address2||be||""),X(u.city||Ce||""),ne(u.state||Se||""),ie(u.zip||ke||""),de(u.country||we||""))}),[u,me,je,be,Ce,we,ve,fe,ye,Ze,Se,ke]);var Te=(0,c.useState)({email:"",firstName:"",lastName:"",phone:"",address:"",city:"",state:"",zip:"",country:""}),Pe=(0,i.Z)(Te,2),_e=Pe[0],Ee=Pe[1],ze=function(e,t){var r="";switch(e){case"email":t?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(t)||(r="Invalid email address"):r="Email is required";break;case"firstName":r=t?"":"First name is required";break;case"lastName":r=t?"":"Last name is required";break;case"address":r=t?"":"Address is required";break;case"city":r=t?"":"City is required";break;case"state":r=t?"":"State is required";break;case"zip":r=t?/^\d{5}(-\d{4})?$/.test(t)?"":"Invalid zip code":"Zip code is required";break;case"country":r=t?"":"Country is required"}return Ee((function(t){return(0,s.Z)((0,s.Z)({},t),{},(0,n.Z)({},e,r))})),!r},Fe=function(e){e.preventDefault();var r=ze("email",A),n=ze("firstName",h),a=ze("lastName",E),s=ze("address",L),o=ze("city",K),i=ze("state",re),c=ze("zip",oe),u=ze("country",ue);if(r&&n&&a&&s&&o&&i&&c&&u){var d={email:A,firstName:h,lastName:E,phone:D,address:L,address2:Q,city:K,state:re,zip:oe,country:ue};l(d),xe(!0),Ae(d),t()}},qe=function(e){return["firstName","lastName","email","phone","address","address2","city","state","zip","country"].every((function(t){return e[t]===localStorage.getItem("user"+t.charAt(0).toUpperCase()+t.slice(1))}))},Ae=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n,s,o,i,c,l,u,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Ne()){e.next=26;break}if((n=localStorage.getItem("customerId"))&&!n.startsWith("guest-")&&qe(t)){e.next=24;break}return s=n&&!n.startsWith("guest-")?"http://localhost:8000/api/guest/".concat(n):"http://localhost:8000/api/guest",o=n&&!n.startsWith("guest-")?"PUT":"POST",e.next=8,fetch(s,{method:o,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 8:if(!(r=e.sent).ok){e.next=19;break}return e.next=12,r.json();case 12:i=e.sent,c="POST"===o?i._id:n,localStorage.setItem("customerId",c),localStorage.setItem("isGuest","true"),Object.keys(t).forEach((function(e){localStorage.setItem("user"+e.charAt(0).toUpperCase()+e.slice(1),t[e])})),e.next=24;break;case 19:return e.next=21,r.json();case 21:return l=e.sent,console.error("Failed to submit form data:",l.message),e.abrupt("return");case 24:e.next=30;break;case 26:return t.email,t.firstName,t.lastName,u=(0,f.Z)(t,P),e.next=29,fetch("http://localhost:8000/api/customer/".concat(localStorage.getItem("customerId")),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(u)});case 29:r=e.sent;case 30:if(!r||r.ok){e.next=37;break}return e.next=33,r.json();case 33:d=e.sent,console.error("Failed to submit form data:",d.message),e.next=38;break;case 37:r&&r.ok&&console.log("Form data submitted successfully");case 38:e.next=43;break;case 40:e.prev=40,e.t0=e.catch(0),console.error("Error submitting form data:",e.t0);case 43:case"end":return e.stop()}}),e,null,[[0,40]])})));return function(t){return e.apply(this,arguments)}}(),Me={"& .MuiInputBase-input":{fontSize:"14px"},"& .MuiInputLabel-root":{fontSize:"14px"},border:"0,1px solid black"};return(0,k.jsx)("form",{onSubmit:Fe,className:"information-form-container",children:(0,k.jsxs)(y.Z,{children:[(0,k.jsx)(v.Z,{fontWeight:600,fontSize:16,pb:2,mb:1,variant:"h6",className:"information-titles",children:"Contact"}),(0,k.jsx)(Z.Z,{type:"email",required:!0,id:"email",name:"email",label:"Email",value:A||"",onChange:function(e){return M(e.target.value)},helperText:_e.email||" ",error:!!_e.email,color:A&&!_e.email?"success":"primary",focused:!!A,autoComplete:"email",variant:"outlined",onBlur:function(){return ze("email",A)},sx:Me,disabled:!!ge&&!!A,InputProps:{endAdornment:(0,k.jsx)(j.Z,{position:"end",children:ge&&A?(0,k.jsx)(b.Z,{title:"To Change Your Email Please Go To The Account Page By Clicking the Account Icon On The Top Right Of The Page",children:(0,k.jsx)(g.Z,{sx:{mr:-1},children:(0,k.jsx)("svg",{fill:"#0f75e0",height:"20",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 7H13V9H11V7ZM11 11H13V17H11V11Z"})})})}):null})},children:"Email"}),(0,k.jsx)(Z.Z,{required:!0,type:"tel",id:"phone",name:"phone",label:"phone (optional)",value:D||"",onChange:function(e){var t=function(e){if(!e)return e;var t=e.replace(/[^\d]/g,""),r=t.length;return r<4?t:r<7?"(".concat(t.slice(0,3),") ").concat(t.slice(3)):"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6,10))}(e.target.value);B(t)},color:D&&!_e.phone?"success":"primary",focused:!!D,autoComplete:"phone",variant:"outlined",sx:Me,InputProps:{endAdornment:(0,k.jsx)(j.Z,{position:"end",children:(0,k.jsx)(b.Z,{title:"Incase we need to contact you about your order",children:(0,k.jsx)(g.Z,{sx:{mr:-1},children:(0,k.jsx)("svg",{fill:"#0f75e0",height:"20",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 7H13V9H11V7ZM11 11H13V17H11V11Z"})})})})})},children:"Phone"}),(0,k.jsx)(v.Z,{fontWeight:600,fontSize:16,pb:2,my:1,variant:"h6",className:"information-titles",children:"Shipping Information"}),(0,k.jsxs)(C.ZP,{container:!0,spacing:1,children:[(0,k.jsx)(C.ZP,{item:!0,xs:12,sm:6,pr:2,children:(0,k.jsx)(Z.Z,{fullWidth:!0,required:!0,type:"text",id:"firstName",name:"firstName",label:"First Name",value:h||"",onChange:function(e){return m(e.target.value)},error:!!_e.firstName,helperText:_e.firstName||" ",autoComplete:"given-name",variant:"outlined",color:h&&!_e.firstName?"success":"primary",onBlur:function(){return ze("firstName",h)},focused:!!h,sx:Me})}),(0,k.jsx)(C.ZP,{item:!0,xs:12,sm:6,children:(0,k.jsx)(Z.Z,{required:!0,autoComplete:"family-name",value:E||"",onChange:function(e){z(e.target.value)},error:!!_e.lastName,helperText:_e.lastName||" ",color:E&&!_e.lastName?"success":"primary",id:"lastName",name:"lastName",label:"Last Name",fullWidth:!0,variant:"outlined",onBlur:function(){return ze("lastName",E)},focused:!!E,sx:Me})}),(0,k.jsx)(C.ZP,{item:!0,xs:12,children:(0,k.jsx)(w,{id:"address",label:"Address line 1*",fullWidth:!0,error:!!_e.address,helperText:_e.address||" ",color:L&&!_e.address?"success":"primary",onAddressSelected:function(e){var t="",r="";U(""),J(""),X(""),ne(""),ie(""),de(""),e.address_components.forEach((function(e){var n=e.types[0];switch("street_number"===n?t=e.long_name:"route"===n&&(r=e.long_name),n){case"street_number":t=e.long_name;break;case"route":r=e.long_name;break;case"locality":X(e.long_name);break;case"administrative_area_level_1":ne(e.short_name);break;case"postal_code":ie(e.long_name);break;case"country":de(e.long_name)}}));var n=t&&r?"".concat(t," ").concat(r):r;U(n)},value:L||"",setValue:U,focused:!!L,onBlur:function(){return ze("address",L)},sx:Me})}),(0,k.jsx)(C.ZP,{item:!0,xs:12,children:(0,k.jsx)(Z.Z,{helperText:(0,k.jsxs)("span",{children:[(0,k.jsx)("svg",{height:"16",style:{transform:"translateY(3px)"},viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 7H13V9H11V7ZM11 11H13V17H11V11Z"})})," Add a Building /Appartment number if you have one"]}),id:"address2",name:"address2",label:"Address line 2 (optional)",fullWidth:!0,autoComplete:"shipping address-line2",variant:"outlined",onChange:function(e){return J(e.target.value)},value:Q||"",sx:Me,focused:!!Q,color:Q?"success":"primary"})}),(0,k.jsx)(C.ZP,{item:!0,xs:12,sm:4,children:(0,k.jsx)(Z.Z,{value:K||"",onChange:function(e){X(e.target.value)},onBlur:function(){return ze("city",K)},error:!!_e.city,helperText:_e.city||" ",color:K&&!_e.city?"success":"primary",required:!0,id:"city",name:"city",label:"City",fullWidth:!0,autoComplete:"shipping address-level2",variant:"outlined",focused:!!K,sx:Me})}),(0,k.jsx)(C.ZP,{item:!0,xs:12,sm:4,children:(0,k.jsx)(Z.Z,{value:re||"",onChange:function(e){ne(e.target.value)},error:!!_e.state,helperText:_e.state||" ",color:re&&!_e.state?"success":"primary",required:!0,id:"state",name:"state",label:"State",fullWidth:!0,autoComplete:"administrative_area_level_1",variant:"outlined",onBlur:function(){return ze("state",re)},focused:!!re,sx:Me})}),(0,k.jsx)(C.ZP,{item:!0,xs:12,sm:4,children:(0,k.jsx)(Z.Z,{value:oe||"",onChange:function(e){ie(e.target.value)},error:!!_e.zip,helperText:_e.zip||" ",color:oe&&!_e.zip?"success":"primary",required:!0,id:"zip",name:"zip",label:"ZIP code",fullWidth:!0,autoComplete:"postal_code",variant:"outlined",onBlur:function(){return ze("zip",oe)},focused:!!oe,sx:Me})}),(0,k.jsx)(C.ZP,{item:!0,xs:12,children:(0,k.jsx)(Z.Z,{value:ue||"",onChange:function(e){de(e.target.value)},error:!!_e.country,helperText:_e.country||" ",color:ue&&!_e.country?"success":"primary",required:!0,id:"country",name:"country",label:"Country/Region",fullWidth:!0,autoComplete:"country",variant:"outlined",onBlur:function(){return ze("country",ue)},focused:!!ue,sx:Me})}),(0,k.jsxs)(C.ZP,{item:!0,xs:12,className:"information-buttons",children:[(0,k.jsxs)(S.Z,{onClick:r,variant:"outlined",sx:{height:55,m:1,letterSpacing:2,color:"#283047",backgroundColor:"white",borderColor:"#283047",borderWidth:1.5,"&:hover":{backgroundColor:"#0F75E0",color:"white"}},children:[(0,k.jsx)(N.Z,{sx:{fontSize:18,mr:1}}),"Back to cart"]}),(0,k.jsxs)(S.Z,{onClick:Fe,variant:"outlined",sx:{letterSpacing:2,color:"white",backgroundColor:"#283047","&:hover":{backgroundColor:"#FE6F49",border:"1px solid #FE6F49 "},textAlign:"center",height:55},children:[(0,k.jsx)("span",{className:"cartSummary-checkout-text",children:"Proceed"}),"  to Shipping"]})]})]})]})})},E=r(493),z=r(4852),F=r(9900),q=r(653),A=r(9040),M=r(1604),W=function(e){var t=e.shippingDetails,r=e.back,n={textDecoration:"underline",fontSize:12};return(0,k.jsxs)("div",{className:"checkout-shipping",children:[(0,k.jsx)(v.Z,{variant:"h6",children:"Contact:"}),(0,k.jsxs)("div",{className:"checkout-shipping-contact",children:[(0,k.jsx)(v.Z,{variant:"subtitle1",children:" Contact:"}),(0,k.jsxs)("div",{className:"checkout-shipping-change",children:[(0,k.jsx)(v.Z,{variant:"body2",fontWeight:100,children:t.phone}),(0,k.jsx)(v.Z,{variant:"body2",fontWeight:100,children:t.email}),(0,k.jsx)(S.Z,{onClick:r,style:n,children:"Change"})]})]}),(0,k.jsxs)("div",{className:"checkout-shipping-address",children:[(0,k.jsx)(v.Z,{variant:"subtitle1",children:"Ship to:"}),(0,k.jsxs)("div",{className:"checkout-shipping-change",children:[(0,k.jsx)(v.Z,{fontWeight:100,variant:"body2",children:t.firstName+" "+t.lastName}),(0,k.jsx)(v.Z,{fontWeight:100,variant:"body2",children:"".concat(t.address," ").concat(t.address2,", ").concat(t.city,", ").concat(t.state," ").concat(t.zip,", ").concat(t.country)}),(0,k.jsx)(S.Z,{onClick:r,style:n,children:"Change"})]})]})]})},H=function(e){var t=e.cartItems,r=e.shippingDetails,n=e.onShippingCostChange,u=e.back,d=e.isLoading,p=e.onShippingOptionsChange,m=e.handleCheckout,x=e.setEstimatedShipping,g=e.lastAddress,f=e.setLastAddress,y=e.shipmentOptions,Z=e.setShipmentOptions,j=e.fullCost,b=e.setShippingDetails,w=(0,c.useState)([]),I=(0,i.Z)(w,2),T=I[0],P=I[1],_=(0,c.useState)(!1),H=(0,i.Z)(_,2),D=H[0],B=H[1],O=(0,c.useState)(1),V=(0,i.Z)(O,2),L=V[0],U=V[1],R=(0,c.useState)([]),G=(0,i.Z)(R,2),Q=G[0],J=G[1],Y=(0,c.useState)(!1),$=(0,i.Z)(Y,2),K=$[0],X=$[1],ee=(0,c.useState)(""),te=(0,i.Z)(ee,2),re=te[0],ne=te[1],ae=0,se=0,oe=0,ie=0,ce=5,le=5,ue=5;t.forEach((function(e){var t=e.length||ce,r=e.width||le,n=e.height||ue,a=e.weight*e.quantity;ae+=a,se=Math.max(se,t),oe=Math.max(oe,r),ie=Math.max(ie,n)}));var de=function(e){if(null===e||void 0===e||""===e||isNaN(e))return"Estimated delivery date not available";var t=new Date,r=(0,A.Z)(t,e);return(0,M.Z)(r,"MMMM do, yyyy")},pe=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,o,i,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(JSON.stringify(g)!==JSON.stringify(r)){e.next=3;break}return P(y),e.abrupt("return");case 3:return e.prev=3,B(!0),"http://localhost:8000/api/shippo",t={addressTo:{name:"".concat(r.firstName," ").concat(r.lastName),street1:r.address,street2:r.address2,city:r.city,state:r.state,zip:r.zip,country:r.country},parcel:{length:se.toString(),width:oe.toString(),height:ie.toString(),distance_unit:"in",weight:ae.toString(),mass_unit:"oz"}},e.next=9,fetch("http://localhost:8000/api/shippo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 9:if((n=e.sent).ok){e.next=18;break}return e.next=13,n.text();case 13:throw o=e.sent,console.error("HTTP Error: ".concat(n.status," ").concat(n.statusText),o),new Error("HTTP Error: ".concat(n.status));case 18:return e.next=20,n.json();case 20:i=e.sent,c=i.rates.sort((function(e,t){return parseFloat(e.amount)-parseFloat(t.amount)})),j.subTotal>50&&(c=c.map((function(e){return(0,s.Z)((0,s.Z)({},e),{},{amount_local:parseFloat(e.amount_local)<10?0:e.amount_local,isFree:parseFloat(e.amount_local)<10})}))),P(c),f(r),Z(c);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(3),console.error("There was a problem with the fetch operation:",e.t0);case 31:return e.prev=31,B(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,28,31,34]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){r&&r.address&&pe()}),[]),(0,c.useEffect)((function(){J(new Array(T.length).fill(!1))}),[T]);var he=4*L,me=he-4,xe=T.slice(me,he);return(0,k.jsxs)(l.Z,{className:"checkout-shipping-container",children:[(0,k.jsx)(W,{shippingDetails:r,back:u}),D?(0,k.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,k.jsx)(h.Z,{}),"Getting Shipping Rates..."]}):(0,k.jsxs)(E.Z,{children:[(0,k.jsx)(v.Z,{variant:"h6",children:"Shipping Method"}),re&&(0,k.jsx)(v.Z,{color:"error",style:{margin:"10px 0"},children:re}),(0,k.jsx)(l.Z,{children:(0,k.jsx)(E.Z,{children:xe.map((function(e,t){return(0,k.jsx)(z.ZP,{sx:{backgroundColor:Q[t]?"rgba(15, 117, 224, 0.1)":"",borderColor:re?"#D23030":""},className:"checkout-shipping-item-".concat(+t),children:(0,k.jsxs)("div",{className:"checkout-shipping-item-container",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(F.Z,{className:"checkout-shipping-name",primary:e.servicelevel.name,secondary:"Estimated Delivery: ".concat(de(e.estimated_days))}),(0,k.jsx)(q.Z,{children:(0,k.jsx)("img",{src:e.provider_image_75,alt:"index"})})]}),(0,k.jsxs)("div",{className:"checkout-shipping-item-price-container",children:[(0,k.jsx)(F.Z,{className:"checkout-shipping-price",primary:e.isFree?"Free":"$"+e.amount_local,style:{marginRight:"5px"}}),(0,k.jsx)(S.Z,{disabled:Q[t],className:"checkout-shipping-button",sx:{fontSize:12,minWidth:"80px",ml:2},variant:"outlined",onClick:function(){return function(e,t){var a=xe.map((function(e){return de(e.estimated_days)}));T[t].isFree&&(e=0),n(e),p(T[t]),x(a[t]);var o=Q.map((function(e,r){return r===t}));J(o),X(!0),T[t].parcel={length:se.toString(),width:oe.toString(),height:ie.toString(),distance_unit:"in",weight:ae.toString(),mass_unit:"oz"},b((0,s.Z)((0,s.Z)({},T[t]),r))}(e.amount_local,t)},children:Q[t]?"Selected":"Select"})]})]})},t)}))})}),(0,k.jsxs)(C.ZP,{container:!0,style:{marginTop:"20px",justifyContent:"space-between"},children:[L>1&&(0,k.jsx)(S.Z,{variant:"contained",onClick:function(){U(L-1)},children:"Previous"}),he<T.length&&(0,k.jsx)(S.Z,{variant:"contained",onClick:function(){U(L+1)},children:1===L?"See More Shipping Options":"Next"})]})]}),(0,k.jsxs)(C.ZP,{container:!0,sx:{marginTop:"20px",justifyContent:"space-between",marginLeft:{xs:3.5,sm:0}},children:[(0,k.jsxs)(S.Z,{onClick:u,variant:"outlined",sx:{m:1,width:{xs:"75%",sm:"45%",md:"230px"},letterSpacing:2,color:"#283047",backgroundColor:"white",borderColor:"#283047",borderWidth:1.5,height:55,"&:hover":{backgroundColor:"#0F75E0",color:"white"}},children:[(0,k.jsx)(N.Z,{sx:{fontSize:18,mr:1}}),"Return to information"]}),(0,k.jsx)(S.Z,{disabled:!!d,onClick:function(){K?m():ne("Please select a shipping option to proceed.")},variant:"outlined",sx:{m:1,width:{xs:"75%",sm:"45%",md:"230px"},letterSpacing:2,color:"white",backgroundColor:"#283047",height:56.5,"&:hover":{backgroundColor:"#FE6F49",border:"none"},textAlign:"center"},children:d?(0,k.jsx)(h.Z,{size:24,sx:{color:"#0F75E0"}}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{className:"cartSummary-checkout-text",children:"Proceed to "})," Payment"]})})]})]})},D=r(9472),B=r(5585),O=r(2419),V=r(5860),L=r(3395),U=r(1087),R=function(e){var t=e.cartItems,r=e.shippingCost,n=e.total,a=e.removeFromCart,s=e.adjustQuantity,o=e.next,u=e.step,d=e.setFullCost,p=function(e){return"number"===typeof e?"$".concat(e.toFixed(2)):e},h=.11*n,m=isNaN(r)?0:Number(r),x=n+m+h,f=(0,c.useRef)(null),y=(0,c.useState)(!1),Z=(0,i.Z)(y,2),j=Z[0],C=Z[1];(0,c.useEffect)((function(){if(!(t.length<2)){var e=function(){var e=f.current.scrollHeight>f.current.clientHeight;C(e)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}}),[]);return(0,c.useEffect)((function(){d({subTotal:n,grandTotal:x,tax:Number(h.toFixed(2)),shippingCost:m})}),[x]),(0,k.jsx)("div",{className:"cartSummary-container",children:(0,k.jsxs)(E.Z,{disablePadding:!0,children:[(0,k.jsxs)(l.Z,{ref:f,sx:{maxHeight:"60vh",minHeight:"65vh",overflow:"auto",mt:{xs:1,sm:-2.5},mb:-1.25},children:[(0,k.jsx)(v.Z,{variant:"h1",component:"h1",sx:{borderBottom:.1,my:2,textAlign:"center",fontSize:"h5.fontSize"},gutterBottom:!0,children:"Order Summary"}),0===t.length?(0,k.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",height:"50vh"},children:[(0,k.jsx)(v.Z,{align:"center",sx:{mt:3,fontVariant:"all-small-caps",fontSize:{xs:16,sm:20,md:22},fontWeight:100},children:"Your Cart Is Empty!"}),(0,k.jsx)("svg",{height:"150",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",children:(0,k.jsx)("path",{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 0 0-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 1 0 0 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 0 0-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 0 0-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 0 0-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 0 0-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 0 1-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 0 1-31.6 31.6z"})}),(0,k.jsx)(S.Z,{to:"/shop",component:U.rU,sx:{border:1,width:"50%",borderRadius:0,letterSpacing:2,color:"#283047",backgroundColor:"white",borderColor:"#283047",borderWidth:1.5,height:55,"&:hover":{backgroundColor:"#0F75E0",color:"white"}},children:" Start Shopping"})]}):t.map((function(e,t){return(0,k.jsxs)(l.Z,{sx:{display:"flex",mx:{xs:2,sm:5},my:2},children:[(0,k.jsx)(D.Z,{badgeContent:e.quantity,color:"secondary",sx:{".MuiBadge-badge":{backgroundColor:"rgba(195, 26, 210, 0.72)",color:"white"}},children:(0,k.jsx)("img",{className:"cart-img",src:e.img.split("/upload/").join("/upload/c_fill,h_200,w_200/f_auto,q_auto:good/"),alt:e.name,width:80,height:80,loading:"lazy"})}),(0,k.jsxs)(l.Z,{children:[(0,k.jsxs)(l.Z,{sx:{ml:1},children:[(0,k.jsx)(v.Z,{sx:{fontWeight:500,fontSize:18,fontFamily:'"Avenir Next", sans-serif',fontVariantCaps:"all-small-caps",lineHeight:{xs:1},width:{xs:"auto",md:"100%"}},variant:"h6",children:e.name}),(0,k.jsx)(v.Z,{sx:{fontFamily:'"Avenir Next", sans-serif',fontWeight:200,color:"black",fontVariantCaps:"all-small-caps",lineHeight:1},children:e.specs})]}),(0,k.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:{xs:"260px",md:"290px"}},children:[(0,k.jsxs)(v.Z,{sx:{fontWeight:100,color:"gray",ml:1},children:["$",e.price.toFixed(2)*e.quantity]}),(0,k.jsx)(l.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center"},children:(0,k.jsxs)(l.Z,{sx:{border:1,width:100,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,k.jsx)(g.Z,{onClick:function(){return s(e._id,e.quantity-1)},children:(0,k.jsx)(B.Z,{sx:{fontSize:10}})}),(0,k.jsx)(v.Z,{sx:{fontWeight:100},children:e.quantity}),(0,k.jsx)(g.Z,{onClick:function(){return s(e._id,e.quantity+1)},children:(0,k.jsx)(O.Z,{sx:{fontSize:10}})})]})}),(0,k.jsx)(l.Z,{sx:{},children:(0,k.jsx)(S.Z,{sx:{fontSize:12,color:"#0F75E0",textDecoration:"underline"},onClick:function(){return a(e._id)},children:"Remove"})})]})]})]},"product:"+t)}))]}),t.length>0&&(0,k.jsxs)(k.Fragment,{children:[j&&(0,k.jsx)(g.Z,{onClick:function(){f.current&&(f.current.scrollTop=f.current.scrollHeight)},sx:{position:"absolute",right:{xs:"20vw",sm:"8vw"},bottom:0!==u?225:{xs:360,sm:290},backgroundColor:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(4px)",borderRadius:"50%",border:"1px solid black"},children:(0,k.jsx)(L.Z,{})}),(0,k.jsxs)(l.Z,{className:"cartSummary-cost",children:[(0,k.jsxs)(z.ZP,{style:{padding:"10px 0"},children:[(0,k.jsx)(F.Z,{primary:"Subtotal"}),(0,k.jsx)(v.Z,{variant:"subtitle1",style:{fontWeight:500},children:p(n)})]}),(0,k.jsxs)(z.ZP,{style:{padding:"10px 0"},children:[(0,k.jsx)(F.Z,{primary:"Shipping"}),(0,k.jsx)(v.Z,{variant:"body2",children:p(r)})]}),(0,k.jsxs)(z.ZP,{style:{padding:"10px 0"},children:[(0,k.jsx)(F.Z,{primary:(0,k.jsxs)(l.Z,{component:"span",sx:{display:"flex",alignItems:"center"},children:["Estimated Taxes",(0,k.jsx)(b.Z,{title:"The final tax and total will be confirmed by email or text after you place your order.",arrow:!0,children:(0,k.jsx)(V.Z,{sx:{fontSize:18,ml:1,cursor:"pointer"}})})]})}),(0,k.jsx)(v.Z,{variant:"body2",children:p(h)})]}),(0,k.jsxs)(z.ZP,{style:{padding:"10px 0"},children:[(0,k.jsx)(F.Z,{primary:"Total"}),(0,k.jsx)(v.Z,{variant:"subtitle1",style:{fontWeight:700},children:p(x)})]})]}),0===u?(0,k.jsxs)(l.Z,{className:"cartSummary-checkout-button",children:[(0,k.jsxs)(S.Z,{onClick:o,variant:"outlined",sx:{m:1,width:{xs:"75%",sm:"45%",md:"40%"},letterSpacing:2,color:"white",backgroundColor:"#283047",height:56.5,"&:hover":{backgroundColor:"#FE6F49",border:"none"},textAlign:"center"},children:[(0,k.jsx)("span",{className:"cartSummary-checkout-text",children:"Proceed  to "})," Checkout"]}),(0,k.jsx)(S.Z,{component:U.rU,to:"/shop",variant:"outlined",sx:{m:1,width:{xs:"75%",sm:"45%",md:"40%"},letterSpacing:2,color:"#283047",backgroundColor:"white",borderColor:"#283047",borderWidth:1.5,height:55,"&:hover":{backgroundColor:"#0F75E0",color:"white"}},children:"Continue Shopping"})]}):null]})]})})},G=r(6679),Q=r(7689),J=r(6305),Y=r(2814),$=function(e){var t=e.onPaymentProcess,r=e.shippingDetails,n=e.back;return(0,k.jsxs)("div",{className:"checkout-paymentForm-container",children:[(0,k.jsx)(W,{shippingDetails:r,back:n}),(0,k.jsx)(v.Z,{mt:8,variant:"h6",children:"Payment:  "}),(0,k.jsxs)(v.Z,{variant:"body2",fontWeight:100,className:"checkout-paymentForm-SQUARE",children:[(0,k.jsx)("span",{className:"square-text",children:" All transactions are processed secured and encrypted by"}),"    ",(0,k.jsx)("img",{src:"https://images.ctfassets.net/2d5q1td6cyxq/58rgox9CjnDZYQSxSwikxb/d9cae0bf4d3f53900820eac00b049528/PD04488_-_black_logo_on_white.png?w=1502&h=768&fm=avif&q=85&fit=scale",alt:"square-logo",className:"checkout-paymentForm-logo"})]}),(0,k.jsx)(v.Z,{variant:"body2",fontWeight:100,className:"square-form-text",children:"Square\xa9 Payment Form"}),(0,k.jsx)("div",{className:"checkout-payment-card-form",children:(0,k.jsx)(J.Z,{applicationId:"sq0idp-hf28U7qMTnVAg3UfzB4QYQ",locationId:"LMGVYG8QR4QFQ",cardTokenizeResponseReceived:function(e){t(e)},children:(0,k.jsx)(Y.Z,{})})}),(0,k.jsxs)(S.Z,{onClick:n,variant:"outlined",sx:{mt:3,width:"100%",letterSpacing:2,color:"#283047",backgroundColor:"white",borderColor:"#283047",borderWidth:1.5,height:50,"&:hover":{backgroundColor:"#0F75E0",color:"white"}},children:[(0,k.jsx)(N.Z,{sx:{fontSize:18,mr:1}}),"Return to shipping"]})]})},K=r(8447),X=r(2003),ee={display:"flex",alignItems:"center",justifyContent:"center"},te={display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.8)",padding:"20px",borderRadius:"10px"},re={marginTop:"10px",fontSize:"16px"};function ne(e){return(0,k.jsxs)(l.Z,{sx:{position:"relative",display:"inline-flex"},children:[(0,k.jsx)(h.Z,(0,s.Z)({variant:"determinate"},e)),(0,k.jsx)(l.Z,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,k.jsx)(v.Z,{variant:"caption",component:"div",color:"text.secondary",children:"".concat(Math.round(e.value),"%")})})]})}var ae=function(e){var t=e.open,r=e.message,n=(0,c.useState)(0),a=(0,i.Z)(n,2),s=a[0],o=a[1];return(0,c.useEffect)((function(){if(!1!==t){var e=setInterval((function(){o((function(e){return e>=100?0:e+1}))}),100);return function(){clearInterval(e)}}o(100)}),[]),(0,k.jsx)(K.Z,{open:t,closeAfterTransition:!0,style:ee,children:(0,k.jsx)(X.Z,{in:t,children:(0,k.jsxs)("div",{style:te,children:[(0,k.jsx)(ne,{value:s}),(0,k.jsx)("span",{style:re,children:r})]})})})},se=function(){(0,c.useEffect)((function(){document.title="Checkout - Complete Your Herba Naturals Purchase",document.querySelector('meta[name="description"]').setAttribute("content","Secure checkout process for your Herba Naturals purchases. Complete your order of premium CBD products quickly and safely.")}),[]);var e=(0,c.useState)(!1),t=(0,i.Z)(e,2),r=t[0],f=t[1],y=(0,Q.s0)(),v=(0,Q.UO)().step,Z=parseInt(v)-1,j=(0,c.useState)({}),b=(0,i.Z)(j,2),C=b[0],S=b[1],w=["Cart","Information","Shipping","Payment"],N=(0,G.j)(),I=N.cart,P=N.removeFromCart,E=N.adjustQuantity,z=N.notes,F=N.clearCart,q=(0,c.useState)("Calculated at Next Step"),A=(0,i.Z)(q,2),M=A[0],D=A[1],B=I.reduce((function(e,t){return e+t.product.price*t.quantity}),0),O="Calculated at checkout",V=(0,c.useState)({}),L=(0,i.Z)(V,2),J=L[0],Y=L[1],K=(0,c.useState)({}),X=(0,i.Z)(K,2),ee=X[0],te=X[1],re=(0,c.useState)([]),ne=(0,i.Z)(re,2),se=ne[0],oe=ne[1],ie=(0,c.useState)(!1),ce=(0,i.Z)(ie,2),le=ce[0],ue=ce[1],de=(0,c.useState)({}),pe=(0,i.Z)(de,2),he=pe[0],me=pe[1],xe=(0,c.useState)(""),ge=(0,i.Z)(xe,2),fe=ge[0],ye=ge[1],ve=(0,c.useState)({}),Ze=(0,i.Z)(ve,2),je=Ze[0],be=Ze[1],Ce=(0,T.a)().isLoggedIn,Se=(0,c.useState)(!1),ke=(0,i.Z)(Se,2),we=ke[0],Ne=ke[1],Ie=function(e,t){"clickaway"!==t&&Ne(!1)},Te=(0,c.useState)({email:"",firstName:"",lastName:"",address:"",address2:"",city:"",state:"",zip:"",country:""}),Pe=(0,i.Z)(Te,2),_e=Pe[0],Ee=Pe[1],ze=function(){var e=localStorage.getItem("customerId"),t="true"===localStorage.getItem("isGuest");return e&&e.startsWith("guest-")||t};(0,c.useEffect)((function(){3!==Z||r||function(){f(!1);var e=document.createElement("script");e.src="https://web.squarecdn.com/v1/square.js",e.type="text/javascript",e.async=!1,e.onload=function(){return f(!0)},document.body.appendChild(e)}(),0===Z&&ze()&&Ne(!0)}),[Z,r]);var Fe=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n,o,i,c,l,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue(!0),e.prev=1,r=Math.round(100*J.grandTotal),!t){e.next=38;break}return e.next=6,We(C);case 6:return n=e.sent,console.log("trackingInfo: ",n),he.shippingMethod=(0,s.Z)((0,s.Z)({},he.shippingMethod),{},{carrier:n.rate.provider,trackingNumber:n.tracking_number,trackingUrl:n.tracking_url_provider,labelUrl:n.label_url,estimatedShipping:fe}),e.next=11,Ae(t,r,he);case 11:if(!0!==(o=e.sent).success){e.next=35;break}return he.transactionId=o.response.result.payment.id,he.paymentStatus="Paid",ze()?(he.createdBy=localStorage.getItem("customerId"),he.createdByType="Guest"):(he.createdBy=localStorage.getItem("customerId"),he.createdByType="Customer"),e.next=18,Me(he);case 18:if(i=e.sent,ze()){e.next=25;break}return c={orders:i._id},e.next=23,He(localStorage.getItem("customerId"),c);case 23:e.next=31;break;case 25:return l={orders:i._id},e.next=28,De(localStorage.getItem("customerId"),l);case 28:u=localStorage.getItem("isVerified"),localStorage.clear(),localStorage.setItem("isVerified",u);case 31:F(),y("/success",{state:{paymentDetails:o}}),e.next=36;break;case 35:console.error("Payment processing failed:",o);case 36:e.next=39;break;case 38:console.error("Missing payment token");case 39:e.next=44;break;case 41:e.prev=41,e.t0=e.catch(1),console.error("Error during finalizing order and payment:",e.t0);case 44:return e.prev=44,ue(!1),e.finish(44);case 47:case"end":return e.stop()}}),e,null,[[1,41,44,47]])})));return function(t){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){var e=localStorage.getItem("customerId"),t=ze();Ce||t?e||t||y("/login?returnUrl=/checkout/1"):y("/registration?returnUrl=/checkout/1")}),[Ce,y]),(0,c.useEffect)((function(){console.log("shippingDetails",C)}),[C]);var qe=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ue(!0),t=localStorage.getItem("customerId"),r=localStorage.getItem("userEmail"),me({customer:t,customerEmail:_e.email||r,customerPhone:C.phone,products:I.map((function(e){return{name:e.product.name,productId:e.product._id,price:e.product.price,quantity:e.quantity,img:e.product.imgSource[0].url}})),shippingMethod:{provider:ee.provider,carrierAccountId:ee.carrier_account,serviceLevelToken:ee.servicelevel.token,price:ee.amount,amountCharged:ee.amount_local,type:ee.servicelevel.name},totalAmount:J,orderNotes:z,address:"".concat(C.firstName," ").concat(C.lastName,", ").concat(C.address,", ").concat(C.city,", ").concat(C.state,", ").concat(C.zip,", ").concat(C.country),createdBy:localStorage.getItem("customerId")}),ue(!1),Be();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r,n){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:8000/api/payment/process-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sourceId:t.token,amount:r,cost:J,notes:z,estimatedShipping:fe,orderDetails:n,last4:t.details.card.last4})});case 3:if((s=e.sent).ok){e.next=12;break}return e.t0=Error,e.t1="Payment processing failed: HTTP ".concat(s.status," - "),e.next=9,s.text();case 9:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 12:return e.next=14,s.json();case 14:return e.abrupt("return",e.sent);case 17:return e.prev=17,e.t4=e.catch(0),console.error("Error processing payment:",e.t4),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Me=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:8000/api/order/create",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});case 3:return r=e.sent,e.next=6,r.json();case 6:if((n=e.sent)&&200===r.status){e.next=10;break}return console.error("Error creating order:",n.message),e.abrupt("return",null);case 10:return e.abrupt("return",n);case 13:return e.prev=13,e.t0=e.catch(0),console.error("Error creating order asynchronously:",e.t0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"http://localhost:8000/api/shippo/create",e.next=4,fetch("http://localhost:8000/api/shippo/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shippingDetails:t})});case 4:if((r=e.sent).ok){e.next=13;break}return e.next=8,r.text();case 8:throw n=e.sent,console.error("HTTP Error: ".concat(r.status," ").concat(r.statusText),n),new Error("HTTP Error: ".concat(r.status));case 13:return e.next=15,r.json();case 15:return s=e.sent,console.log(s),e.abrupt("return",s);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error("Error creating shipping label:",e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),He=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:8000/api/customer/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error updating customer data:",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}(),De=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:8000/api/guest/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error updating customer data:",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){(isNaN(Z)||Z<0||Z>=w.length)&&y("/checkout/1")}),[Z,w.length,y]);var Be=function(){y("/checkout/".concat(Z+2))},Oe=function(){y("/checkout/".concat(Z))};return(0,k.jsxs)("div",{className:"checkoutPage-container",children:[(0,k.jsx)(ae,{open:le,message:"Your payment is being processed, Please do not leave or refresh this page"}),(0,k.jsxs)(l.Z,{sx:{display:"flex",flexDirection:{xs:"column-reverse",md:"row"}},children:[(0,k.jsx)("div",{style:{flex:1},children:(0,k.jsx)("div",{children:(0,k.jsxs)("div",{children:[(0,k.jsx)(u.Z,{activeStep:Z,alternativeLabel:!0,sx:{position:{xs:"fixed",sm:"relative"},top:{xs:0,sm:"auto"},zIndex:{xs:1e4,sm:"auto"},pt:{xs:5,sm:0},pb:{xs:1,sm:0},width:{xs:"100%"},bgcolor:{xs:"background.paper"},borderBottom:{xs:"0.1px solid black",sm:"none"}},children:w.map((function(e){return(0,k.jsx)(d.Z,{children:(0,k.jsx)(p.Z,{children:e})},e)}))}),0===Z&&(0,k.jsx)(l.Z,{sx:{pt:{xs:0,sm:2.5},borderTop:"0.1px solid black",mt:{xs:0,sm:1}},children:(0,k.jsx)(R,{cartItems:I.map((function(e){return{_id:e.product._id,img:e.product.imgSource[0].url,name:e.product.name,quantity:e.quantity,price:e.product.price,specs:e.product.specs}})),shippingCost:M,tax:O,total:B,removeFromCart:P,adjustQuantity:E,next:Be,step:Z,setFullCost:Y})}),1===Z&&(0,k.jsx)(_,{back:Oe,next:Be,onShippingDetailsSubmit:function(e){Ee(e),S(e)},formData:_e,onFormChange:function(e,t){Ee((function(r){return(0,s.Z)((0,s.Z)({},r),{},(0,n.Z)({},e,t))}))}}),2===Z&&(0,k.jsx)(H,{handleBack:!0,cartItems:I.map((function(e){return{_id:e.product._id,weight:e.product.shipping.weight,length:e.product.shipping.dimensions.length,width:e.product.shipping.dimensions.width,height:e.product.shipping.dimensions.height,quantity:e.quantity}})),shippingDetails:C,onShippingCostChange:function(e){D(e)},formData:_e,back:Oe,next:Be,onShippingOptionsChange:function(e,t){te(e,t)},handleCheckout:qe,isLoading:le,setEstimatedShipping:ye,lastAddress:je,setLastAddress:be,shipmentOptions:se,setShipmentOptions:oe,fullCost:J,setShippingDetails:S}),3===Z&&(r?(0,k.jsx)($,{onPaymentProcess:function(e){Fe(e)},paymentForm:window.SqPaymentForm,shippingDetails:C,back:Oe}):(0,k.jsxs)("div",{style:{margin:"20px"},children:[(0,k.jsx)(W,{shippingDetails:C,back:Oe}),(0,k.jsx)(h.Z,{})]}))]})})}),0!==Z&&0!==I.length?(0,k.jsx)("div",{style:{flex:.9},children:(0,k.jsx)(R,{cartItems:I.map((function(e){return{_id:e.product._id,img:e.product.imgSource[0].url,name:e.product.name,quantity:e.quantity,price:e.product.price,specs:e.product.specs}})),shippingCost:M,tax:O,total:B,removeFromCart:P,adjustQuantity:E,setFullCost:Y,handleCheckout:qe})}):null]}),";",(0,k.jsx)(m.Z,{open:we,autoHideDuration:null,onClose:Ie,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,k.jsxs)(x.Z,{action:(0,k.jsx)(g.Z,{"aria-label":"close",color:"inherit",onClick:Ie,children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"black",height:"40",width:"40",children:(0,k.jsx)("path",{d:"m10.458 31.458-1.916-1.916 9.5-9.542-9.5-9.542 1.916-1.916 9.542 9.5 9.542-9.5 1.916 1.916-9.5 9.542 9.5 9.542-1.916 1.916-9.542-9.5Z"})})}),children:["Checking out as guest.",(0,k.jsx)("br",{}),"   ",(0,k.jsx)(U.rU,{to:"/registration",color:"inherit",underline:"hover",children:"Create account?"})]})})]})}}}]);
//# sourceMappingURL=768.a37583dc.chunk.js.map